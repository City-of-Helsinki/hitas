openapi: 3.0.3
info:
  title: Hitas Helsinki APIs
  version: 1.0.0
  description: API definitions for Hitas Helsinki project.
paths:
  /api/v1/housing-companies:
    get:
      description: Fetch housing companies
      operationId: list-housing-companies
      tags:
        - Housing companies
      parameters:
        - $ref: '#/components/parameters/PagingLimitParameter'
        - $ref: '#/components/parameters/PagingPageParameter'
        - name: display_name
          description: Search housing companies with display name containing the given search string (case-insensitive)
          required: false
          in: query
          schema:
            type: string
            minLength: 2
            example: helmi
        - name: street_address
          description: Search housing companies with street address containing the given search string (case-insensitive)
          required: false
          in: query
          schema:
            type: string
            minLength: 2
            example: Hannunkatu
        - name: postal_code
          description: Search housing companies located in given postal code
          required: false
          in: query
          schema:
            type: string
            pattern: '^\d{5}$'
            example: "00100"
        - name: developer
          description: Search housing companies with developer name containing the given search string (case-insensitive)
          required: false
          in: query
          schema:
            type: string
            minLength: 2
            example: Rakennuttaja
        - name: property_manager
          description: Search housing companies with property manager name matching to the given search string (case-insensitive)
          required: false
          in: query
          schema:
            type: string
            minLength: 2
            example: isännöinti
        - name: archive_id
          description: Search housing companies with exact archive id
          required: false
          in: query
          schema:
            type: number
            minimum: 1
            example: 421
        - name: new_hitas
          description: |-
            Search housing companies by completion date. When this parameter is given and is set
            to `true` then only housing companies completed `2011-01-01` onwards are returned. When
            this parameter is given and set to `false` then only housing companies completed before
            `2011-01-01` are returned.
          required: false
          in: query
          schema:
            type: boolean
      responses:
        '200':
          description: Successfully fetched list of housing companies
          content:
            application/json:
              schema:
                description: Single page of housing companies
                type: object
                additionalProperties: false
                required:
                  - page
                  - contents
                properties:
                  page:
                    $ref: '#/components/schemas/PageInfo'
                  contents:
                    description: List of housing companies
                    type: array
                    items:
                      $ref: '#/components/schemas/HousingCompany'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      description: Add a new housing company
      operationId: create-housing-company
      tags:
        - Housing companies
      requestBody:
        required: true
        content:
          application/json:
            schema:
              additionalProperties: false
              $ref: '#/components/schemas/HousingCompanyDetails'
      responses:
        '201':
          description: Successfully added a new housing company
          content:
            application/json:
              schema:
                additionalProperties: false
                $ref: '#/components/schemas/HousingCompanyDetails'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/housing-companies/{housing_company_id}:
    get:
      description: Fetch a single housing company by id
      operationId: read-housing-company
      tags:
        - Housing companies
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      responses:
        '200':
          description: Successfully read a housing company details
          content:
            application/json:
              schema:
                additionalProperties: false
                $ref: '#/components/schemas/HousingCompanyDetails'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      description: Update a housing company
      operationId: update-housing-company
      tags:
        - Housing companies
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      requestBody:
        required: true
        content:
          application/json:
            schema:
              additionalProperties: false
              $ref: '#/components/schemas/HousingCompanyDetails'
      responses:
        '200':
          description: Successfully updated a housing company
          content:
            application/json:
              schema:
                additionalProperties: false
                $ref: '#/components/schemas/HousingCompanyDetails'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      description: Remove a housing company
      operationId: delete-housing-company
      tags:
        - Housing companies
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      responses:
        '204':
          description: Housing company successfully removed.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Real Estate

  /api/v1/housing-companies/{housing_company_id}/real-estates:
    get:
      description: Fetch real estates for a housing company
      operationId: list-housing-company-real-estates
      tags:
        - Real estates
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - $ref: '#/components/parameters/PagingLimitParameter'
        - $ref: '#/components/parameters/PagingPageParameter'
      responses:
        '200':
          description: Successfully fetched list of real estates
          content:
            application/json:
              schema:
                description: Single page of real estates
                type: object
                additionalProperties: false
                required:
                  - page
                  - contents
                properties:
                  page:
                    $ref: '#/components/schemas/PageInfo'
                  contents:
                    description: List of real estates
                    type: array
                    additionalProperties: false
                    items:
                      $ref: '#/components/schemas/RealEstate'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      description: Add a new real estate for a housing company
      operationId: create-housing-company-real-estate
      tags:
        - Real estates
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      requestBody:
        required: true
        content:
          application/json:
            schema:
              additionalProperties: false
              $ref: '#/components/schemas/RealEstate'
      responses:
        '201':
          description: Successfully added a new real estate for a housing company
          content:
            application/json:
              schema:
                additionalProperties: false
                $ref: '#/components/schemas/RealEstate'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/housing-companies/{housing_company_id}/real-estates/{real_estate_id}:
    get:
      description: Fetch a single real estate by id
      operationId: read-housing-company-real-estate
      tags:
        - Real estates
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - name: real_estate_id
          required: true
          in: path
          description: Real estate ID
          schema:
            type: string
            example: c86eaa399ce141d89d962d46bb81ab2b
      responses:
        '200':
          description: Successfully read a housing company's real estate
          content:
            application/json:
              schema:
                additionalProperties: false
                $ref: '#/components/schemas/RealEstate'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      description: Update a real estate for a housing company
      operationId: update-housing-company-real-estate
      tags:
        - Real estates
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - name: real_estate_id
          required: true
          in: path
          description: Real estate ID
          schema:
            type: string
            example: c86eaa399ce141d89d962d46bb81ab2b
      requestBody:
        required: true
        content:
          application/json:
            schema:
              additionalProperties: false
              $ref: '#/components/schemas/RealEstate'
      responses:
        '200':
          description: Successfully updated an existing real estate for a housing company
          content:
            application/json:
              schema:
                additionalProperties: false
                $ref: '#/components/schemas/RealEstate'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      description: Remove a real estate
      operationId: delete-housing-company-real-estate
      tags:
        - Real estates
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - name: real_estate_id
          required: true
          in: path
          description: Real estate ID
          schema:
            type: string
            example: c86eaa399ce141d89d962d46bb81ab2b
      responses:
        '204':
          description: Real estate successfully removed.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Building

  /api/v1/housing-companies/{housing_company_id}/real-estates/{real_estate_id}/buildings:
    get:
      description: Fetch buildings for a housing company's real estate
      operationId: list-housing-company-real-estates-buildings
      tags:
        - Buildings
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - name: real_estate_id
          required: true
          in: path
          description: Real estate ID
          schema:
            type: string
            example: c86eaa399ce141d89d962d46bb81ab2b
        - $ref: '#/components/parameters/PagingLimitParameter'
        - $ref: '#/components/parameters/PagingPageParameter'
      responses:
        '200':
          description: Successfully fetched list of buildings
          content:
            application/json:
              schema:
                description: Single page of buildings
                type: object
                additionalProperties: false
                required:
                  - page
                  - contents
                properties:
                  page:
                    $ref: '#/components/schemas/PageInfo'
                  contents:
                    description: List of buildings
                    type: array
                    items:
                      $ref: '#/components/schemas/Building'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      description: Add a new building for a housing company's real estate
      operationId: create-housing-company-real-estate-building
      tags:
        - Buildings
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - name: real_estate_id
          required: true
          in: path
          description: Real estate ID
          schema:
            type: string
            example: c86eaa399ce141d89d962d46bb81ab2b
      requestBody:
        required: true
        content:
          application/json:
            schema:
              additionalProperties: false
              $ref: '#/components/schemas/Building'
      responses:
        '201':
          description: Successfully added a new building for a housing company real estate
          content:
            application/json:
              schema:
                additionalProperties: false
                $ref: '#/components/schemas/Building'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/housing-companies/{housing_company_id}/real-estates/{real_estate_id}/buildings/{building_id}:
    get:
      description: Fetch a single real estate by id
      operationId: read-housing-company-real-estate-building
      tags:
        - Buildings
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - name: real_estate_id
          required: true
          in: path
          description: Real estate ID
          schema:
            type: string
            example: c86eaa399ce141d89d962d46bb81ab2b
        - name: building_id
          required: true
          in: path
          description: Building ID
          schema:
            type: string
            example: dc1072975bab4ba69f64814f021c6785
      responses:
        '200':
          description: Successfully read a building details.
          content:
            application/json:
              schema:
                additionalProperties: false
                $ref: '#/components/schemas/Building'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      description: Update a building for a housing company's real estate
      operationId: update-housing-company-real-estate-building
      tags:
        - Buildings
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - name: real_estate_id
          required: true
          in: path
          description: Real estate ID
          schema:
            type: string
            example: c86eaa399ce141d89d962d46bb81ab2b
        - name: building_id
          required: true
          in: path
          description: Building ID
          schema:
            type: string
            example: dc1072975bab4ba69f64814f021c6785
      requestBody:
        required: true
        content:
          application/json:
            schema:
              additionalProperties: false
              $ref: '#/components/schemas/Building'
      responses:
        '200':
          description: Successfully updated an existing building for a housing company's real estate
          content:
            application/json:
              schema:
                additionalProperties: false
                $ref: '#/components/schemas/Building'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      description: Remove a building
      operationId: delete-housing-company-real-estate-building
      tags:
        - Buildings
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - name: real_estate_id
          required: true
          in: path
          description: Real estate ID
          schema:
            type: string
            example: c86eaa399ce141d89d962d46bb81ab2b
        - name: building_id
          required: true
          in: path
          description: Building ID
          schema:
            type: string
            example: dc1072975bab4ba69f64814f021c6785
      responses:
        '204':
          description: Building successfully removed.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Sales catalog

  /api/v1/housing-companies/{housing_company_id}/sales-catalog-validate:

    post:
      description: Read new apartments from a sales catalog, but do not save them
      operationId: read-sales-catalog
      tags:
        - Sales catalog
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      requestBody:
        required: true
        content:
          application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
            schema:
              type: string
              format: binary
          application/vnd.ms-excel:
            schema:
              type: string
              format: binary
      responses:
        '200':
          description: Successfully read sales sheet
          content:
            application/json:
              schema:
                additionalProperties: false
                $ref: '#/components/schemas/SalesCatalog'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptableExcel'
        '415':
          $ref: '#/components/responses/UnsupportedMediaTypeExcel'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/housing-companies/{housing_company_id}/sales-catalog-create:

    post:
      description: |-
        Add apartments from sales catalog to the first real estate and building on this housing company.
        If no real estate or apartment is found on the housing company, create dummy ones automatically.
      operationId: create-sales-catalog
      tags:
        - Sales catalog
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      requestBody:
        required: true
        content:
          application/json:
            schema:
              description: Apartments from the sales catalog
              type: array
              minItems: 1
              items:
                $ref: '#/components/schemas/SalesCatalogApartmentCreate'
      responses:
        '201':
          description: Successfully created apartments from sales catalog
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Apartment

  /api/v1/housing-companies/{housing_company_id}/apartments:
    get:
      description: Fetch apartments for a housing company
      operationId: list-apartments
      tags:
        - Apartments
      parameters:
        - $ref: '#/components/parameters/PagingLimitParameter'
        - $ref: '#/components/parameters/PagingPageParameter'
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - name: street_address
          description: Search apartments with street address containing the given search string (case-insensitive)
          required: false
          in: query
          schema:
            type: string
            minLength: 2
            example: Hannunkatu
        - name: postal_code
          description: Search apartments located in given postal code
          required: false
          in: query
          schema:
            type: string
            pattern: '^\d{5}$'
            example: "00100"
        - name: owner_name
          description: Search apartments whose owner first name or last name contains the given search string (case-insensitive)
          required: false
          in: query
          schema:
            type: string
            minLength: 2
            example: matti
        - name: owner_identifier
          description: Search apartments whose social security number matches the given search string (case-insensitive)
          required: false
          in: query
          schema:
            type: string
            maxLength: 11
            example: 131052-308T
        - name: has_conditions_of_sale
          description: Filter apartments based on whether there are conditions of sale for its ownerships or not
          required: false
          in: query
          schema:
            type: boolean
            example: true
      responses:
        '200':
          description: Successfully fetched list of apartments
          content:
            application/json:
              schema:
                description: Single page of apartments
                type: object
                additionalProperties: false
                required:
                  - page
                  - contents
                properties:
                  page:
                    $ref: '#/components/schemas/PageInfo'
                  contents:
                    description: List of apartments
                    type: array
                    items:
                      $ref: '#/components/schemas/Apartment'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      description: Add a new apartment for a housing company
      operationId: create-apartment
      tags:
        - Apartments
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      requestBody:
        required: true
        content:
          application/json:
            schema:
              additionalProperties: false
              $ref: '#/components/schemas/ApartmentDetails'
      responses:
        '201':
          description: Successfully added a new apartment
          content:
            application/json:
              schema:
                additionalProperties: false
                $ref: '#/components/schemas/ApartmentDetails'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/housing-companies/{housing_company_id}/apartments/{apartment_id}:
    get:
      description: Fetch a single apartment by id
      operationId: read-apartment
      tags:
        - Apartments
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - name: apartment_id
          required: true
          in: path
          description: Apartment ID
          schema:
            type: string
            example: b477389cb3514fb1b444052a39bfb65d
      responses:
        '200':
          description: Successfully read an apartment details
          content:
            application/json:
              schema:
                additionalProperties: false
                $ref: '#/components/schemas/ApartmentDetails'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      description: Update an apartment
      operationId: update-apartment
      tags:
        - Apartments
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - name: apartment_id
          required: true
          in: path
          description: Apartment ID
          schema:
            type: string
            example: b477389cb3514fb1b444052a39bfb65d
      requestBody:
        required: true
        content:
          application/json:
            schema:
              additionalProperties: false
              $ref: '#/components/schemas/ApartmentDetails'
      responses:
        '200':
          description: Successfully updated an apartment
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApartmentDetails'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      description: Remove an apartment
      operationId: delete-apartment
      tags:
        - Apartments
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - name: apartment_id
          required: true
          in: path
          description: Apartment ID
          schema:
            type: string
            example: b477389cb3514fb1b444052a39bfb65d
      responses:
        '204':
          description: Apartment successfully removed.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Apartment maximum price

  /api/v1/housing-companies/{housing_company_id}/apartments/{apartment_id}/reports/download-latest-confirmed-prices:
    post:
      description: Download a single apartment's latest maximum price calculation's PDF
      operationId: read-apartment-maximum-price-pdf
      tags:
        - Apartments
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - name: apartment_id
          required: true
          in: path
          description: Apartment ID
          schema:
            type: string
            example: b477389cb3514fb1b444052a39bfb65d
      responses:
        '200':
          description: Successfully downloaded an apartment's maximum price calculation's PDF
          content:
            application/pdf:
              schema:
                type: string
                format: binary
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/housing-companies/{housing_company_id}/apartments/{apartment_id}/reports/download-latest-unconfirmed-prices:
    post:
      description: Download an apartment's latest unconfirmed maximum price calculation's PDF
      operationId: read-apartment-unconfirmed-maximum-price-pdf
      tags:
        - Apartments
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - name: apartment_id
          required: true
          in: path
          description: Apartment ID
          schema:
            type: string
            example: b477389cb3514fb1b444052a39bfb65d
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                additional_info:
                  description: Additional textual information to be displayed on the generated PDF
                  type: string
                  example: Example text
      responses:
        '200':
          description: Successfully downloaded an apartment's unconfirmed maximum price calculation's PDF
          content:
            application/pdf:
              schema:
                type: string
                format: binary
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/housing-companies/{housing_company_id}/apartments/{apartment_id}/maximum-prices:
    post:
      description: Create a single apartment's maximum price calculation
      operationId: create-apartment-maximum-price
      tags:
        - Apartments
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - name: apartment_id
          required: true
          in: path
          description: Apartment ID
          schema:
            type: string
            example: b477389cb3514fb1b444052a39bfb65d
      requestBody:
        required: false
        content:
          application/json:
            schema:
              description: TBD
              type: object
              additionalProperties: false
              properties:
                calculation_date:
                  description: |-
                    Date which is used for calculating the maximum price. This cannot be in the future.
                    This mainly affects which indices are used and the validity period.
                  anyOf:
                    - type: string
                      format: date
                      example: 2022-07-05
                      nullable: true
                    - type: string
                      maxLength: 0
                      example: ""
                      nullable: true
                  nullable: true
                apartment_share_of_housing_company_loans:
                  description: |-
                    How much the apartment's share of the housing company loans are on the calculation date
                  type: integer
                  minimum: 0
                  example: 2500
                apartment_share_of_housing_company_loans_date:
                  description: Date for `apartment_share_of_housing_company_loans`
                  anyOf:
                    - type: string
                      format: date
                      example: 2022-07-05
                      nullable: true
                    - type: string
                      maxLength: 0
                      example: ""
                      nullable: true
                  nullable: true
                additional_info:
                  description: Additional information to be displayed on the generated PDF
                  type: string
                  example: Example text
      responses:
        '200':
          description: Successfully created an apartment's maximum price calculation
          content:
            application/json:
              schema:
                additionalProperties: false
                $ref: '#/components/schemas/ApartmentMaximumPrice'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/housing-companies/{housing_company_id}/apartments/{apartment_id}/maximum-prices/{calculation_id}:
    get:
      description: Read a single apartment's maximum price calculation
      operationId: read-apartment-maximum-price
      tags:
        - Apartments
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - name: apartment_id
          required: true
          in: path
          description: Apartment ID
          schema:
            type: string
            example: b477389cb3514fb1b444052a39bfb65d
        - name: calculation_id
          required: true
          in: path
          description: Calculation ID
          schema:
            type: string
            example: e65579e3ed0a4cc0b693d9910b41ab08
      responses:
        '200':
          description: Successfully read an apartment's maximum price calculation
          content:
            application/json:
              schema:
                additionalProperties: false
                $ref: '#/components/schemas/ApartmentMaximumPrice'
              examples:
                Apartment completed 2011-01 onwards:
                  value:
                    additional_info: This is an example additional info string
                    apartment:
                      address:
                        apartment_number: 1
                        city: Oulu
                        floor: '1'
                        postal_code: '90100'
                        stair: A
                        street_address: Example street
                      ownerships:
                      - name: Erkki Esimerkki
                        percentage: 50.0
                      - name: Eija Esimerkki
                        percentage: 50.0
                      rooms: 2
                      shares:
                        end: 150
                        start: 1
                        total: 150
                      surface_area: 30.0
                      type: h+kk
                    calculation_date: '2022-07-05'
                    calculations:
                      construction_price_index:
                        maximum_price: 223558.72
                        valid_until: "2022-10-05"
                        maximum: true
                        calculation_variables:
                          first_sale_acquisition_price: 199500.0
                          additional_work_during_construction: 0.0
                          basic_price: 199500.0
                          index_adjustment: 26401.46
                          housing_company_improvements:
                            items:
                              - name: Test improvement
                                value: 150000.0
                                completion_date: "2020-05-21"
                                value_added: 20040.0
                                value_for_housing_company: 22707.86
                                value_for_apartment: 157.26
                            summary:
                              value: 150000.0
                              value_added: 20040.0
                              excess:
                                surface_area: 4332.0
                                value_per_square_meter: 30.0
                                total: 129960.0
                              value_for_housing_company: 22707.86
                              value_for_apartment: 157.26
                          debt_free_price: 226058.72
                          debt_free_price_m2: 7535.29
                          apartment_share_of_housing_company_loans: 2500
                          apartment_share_of_housing_company_loans_date: "2022-07-28"
                          completion_date: "2019-11-27"
                          completion_date_index: 129.29
                          calculation_date: "2022-07-05"
                          calculation_date_index: 146.4
                      market_price_index:
                        maximum_price: 222343.46
                        valid_until: "2022-10-05"
                        maximum: false
                        calculation_variables:
                          first_sale_acquisition_price: 199500.0
                          additional_work_during_construction: 0.0
                          basic_price: 199500.0
                          index_adjustment: 25189.99
                          housing_company_improvements:
                            items:
                              - name: Test improvement
                                value: 150000.0
                                completion_date: "2020-05-21"
                                value_added: 20040.0
                                value_for_housing_company: 22161.19
                                value_for_apartment: 153.47
                            summary:
                              value: 150000.0
                              value_added: 20040.0
                              excess:
                                surface_area: 4332.0
                                value_per_square_meter: 30.0
                                total: 129960.0
                              value_for_housing_company: 22161.19
                              value_for_apartment: 153.47
                          debt_free_price: 224843.46
                          debt_free_price_m2: 7494.78
                          apartment_share_of_housing_company_loans: 2500
                          apartment_share_of_housing_company_loans_date: "2022-07-28"
                          completion_date: "2019-11-27"
                          completion_date_index: 167.9
                          calculation_date: "2022-07-05"
                          calculation_date_index: 189.1
                      surface_area_price_ceiling:
                        maximum_price: 143570.0
                        valid_until: "2022-08-31"
                        maximum: false
                        calculation_variables:
                          calculation_date: "2022-07-05"
                          calculation_date_value: 4869.0
                          surface_area: 30.0
                          apartment_share_of_housing_company_loans: 2500
                          apartment_share_of_housing_company_loans_date: "2022-07-28"
                    confirmed_at: null
                    created_at: '2022-12-05T08:13:25.380594Z'
                    housing_company:
                      archive_id: 124
                      official_name: Example housing company Oy
                      property_manager:
                        name: Example property manager Oy
                        street_address: Example street address 123 B 9 90100 Oulu
                    id: bd8ba72c19764af0a3edffa11260a9eb
                    index: construction_price_index
                    maximum_price: 223558.72
                    new_hitas: true
                    valid_until: '2022-10-05'
                Apartment completed before 2011-01:
                  value:
                    additional_info: This is an example additional info string
                    apartment:
                      address:
                        apartment_number: 1
                        city: Oulu
                        floor: '1'
                        postal_code: '90100'
                        stair: A
                        street_address: Example street
                      ownerships:
                      - name: Erkki Esimerkki
                        percentage: 50.0
                      - name: Eija Esimerkki
                        percentage: 50.0
                      rooms: 2
                      shares:
                        end: 1888
                        start: 1729
                        total: 160
                      surface_area: 54.5
                      type: "h+kk"
                    calculation_date: '2022-09-07'
                    calculations:
                      construction_price_index:
                        calculation_variables:
                          housing_company_acquisition_price: 170_886.35
                          housing_company_assets: 170_886.35
                          apartment_share_of_housing_company_assets: 170886.35
                          interest_during_construction: 3455.0
                          additional_work_during_construction: 0.0
                          index_adjusted_additional_work_during_construction: 0.0
                          apartment_improvements:
                            items:
                              - name: Ullakkohuoneen rakennus
                                value: 4307.0
                                calculation_date_index: 364.4
                                completion_date: "2003-05-09"
                                completion_date_index: 244.9
                                index_adjusted: 6408.62
                                depreciation:
                                  amount: 0.0
                                  percentage: 0.0
                                  time:
                                    years: 19
                                    months: 3
                                value_for_apartment: 6408.62
                            summary:
                              value: 4307.0
                              index_adjusted: 6408.62
                              depreciation: 0.0
                              value_for_apartment: 6408.62
                          housing_company_improvements:
                            items: []
                            summary:
                              value: 0.0
                              value_for_apartment: 0.0
                          debt_free_price: 180749.97
                          debt_free_price_m2: 3316.51
                          apartment_share_of_housing_company_loans: 0
                          apartment_share_of_housing_company_loans_date: "2022-09-05"
                          completion_date: "2003-05-09"
                          completion_date_index: 244.9
                          calculation_date: "2022-09-07"
                          calculation_date_index: 364.4
                        maximum_price: 180749.97
                        valid_until: "2022-12-07"
                        maximum: false
                      market_price_index:
                        calculation_variables:
                          first_sale_acquisition_price: 123173.0
                          interest_during_construction: 3455.0
                          basic_price: 126628.0
                          index_adjustment: 153577.28
                          additional_work_during_construction: 0.0
                          apartment_improvements:
                            items:
                              - name: Ullakkohuoneen rakennus
                                value: 4307.0
                                completion_date: "2003-05-09"
                                value_without_excess: 4307.0
                                depreciation:
                                  amount: 0.0
                                  time:
                                    years: 19
                                    months: 3
                                accepted_value: 9530.63
                            summary:
                              value: 4307.0
                              value_without_excess: 4307.0
                              depreciation: 0.0
                              excess:
                                surface_area: 54.5
                                total: 5450.0
                                value_per_square_meter: 100.0
                              accepted_value: 9530.63
                          housing_company_improvements:
                            items:
                              - name: Test improvement
                                value: 0.0
                                completion_date: "2003-05-01"
                                value_without_excess: 0.0
                                depreciation:
                                  amount: 0.0
                                  time:
                                    years: 19
                                    months: 4
                                accepted_value_for_housing_company: 0.0
                                accepted_value: 0.0
                              - name: Another test improvement
                                value: 1587.0
                                completion_date: "2004-10-01"
                                value_without_excess: 0.0
                                depreciation:
                                  amount: 0.0
                                  time:
                                    years: 17
                                    months: 11
                                accepted_value_for_housing_company: 0.0
                                accepted_value: 0.0
                            summary:
                              value: 1587.0
                              value_without_excess: 0.0
                              excess:
                                surface_area: 3390.5
                                value_per_square_meter: 150.0
                                total: 508_575.0
                              depreciation: 0.0
                              accepted_value_for_housing_company: 0.0
                              accepted_value: 0.0
                          debt_free_price: 289735.91
                          debt_free_price_m2: 5316.26
                          apartment_share_of_housing_company_loans: 0
                          apartment_share_of_housing_company_loans_date: "2022-09-05"
                          completion_date: "2003-05-09"
                          completion_date_index: 263.6
                          calculation_date: "2022-09-07"
                          calculation_date_index: 583.3
                        maximum_price: 289735.91
                        valid_until: "2022-12-07"
                        maximum: true
                      surface_area_price_ceiling:
                        maximum_price: 265524.0
                        valid_until: "2022-11-30"
                        maximum: false
                        calculation_variables:
                          calculation_date: "2022-09-07"
                          calculation_date_value: 4872.0
                          surface_area: 54.5
                          apartment_share_of_housing_company_loans: 0
                          apartment_share_of_housing_company_loans_date: "2022-09-05"
                    confirmed_at: null
                    created_at: '2022-12-05T08:23:28.109872Z'
                    housing_company:
                      archive_id: 1
                      official_name: foo
                      property_manager:
                        name: foo
                        street_address: foo
                    id: 95b342b0dfac42b5a2165c641488cc55
                    index: market_price_index
                    maximum_price: 289735.91
                    new_hitas: false
                    valid_until: '2022-12-07'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      description: Confirm a single apartment's maximum price calculation
      operationId: confirm-apartment-maximum-price
      tags:
        - Apartments
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - name: apartment_id
          required: true
          in: path
          description: Apartment ID
          schema:
            type: string
            example: b477389cb3514fb1b444052a39bfb65d
        - name: calculation_id
          required: true
          in: path
          description: Calculation ID
          schema:
            type: string
            example: e65579e3ed0a4cc0b693d9910b41ab08
      requestBody:
        required: true
        content:
          application/json:
            schema:
              description: TBD
              type: object
              additionalProperties: false
              properties:
                confirm:
                  description: |-
                    Date which is used for calculating the maximum price. This cannot be in the future.
                    This mainly affects which indices are used and the validity period.
                  type: boolean
                  example: true
      responses:
        '200':
          description: Successfully created an apartment's maximum price calculation
          content:
            application/json:
              schema:
                additionalProperties: false
                $ref: '#/components/schemas/ApartmentMaximumPrice'
        '204':
          description: Calculation was successfully rejected and removed.
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Apartment sales

  /api/v1/housing-companies/{housing_company_id}/apartments/{apartment_id}/sales:
    get:
      description: Fetch sales for an apartment
      operationId: list-apartment-sales
      tags:
        - Apartments
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - name: apartment_id
          required: true
          in: path
          description: Apartment ID
          schema:
            type: string
            example: b477389cb3514fb1b444052a39bfb65d
      responses:
        '200':
          description: Successfully fetched list of sales
          content:
            application/json:
              schema:
                description: Single page of sales
                type: object
                additionalProperties: false
                required:
                  - page
                  - contents
                properties:
                  page:
                    $ref: '#/components/schemas/PageInfo'
                  contents:
                    description: List of apartments
                    type: array
                    items:
                      $ref: '#/components/schemas/ApartmentSale'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      description: Add a new sale for an apartment
      operationId: create-apartment-sale
      tags:
        - Apartments
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - name: apartment_id
          required: true
          in: path
          description: Apartment ID
          schema:
            type: string
            example: b477389cb3514fb1b444052a39bfb65d
      requestBody:
        required: true
        content:
          application/json:
            schema:
              additionalProperties: false
              $ref: '#/components/schemas/ApartmentSaleCreate'
      responses:
        '201':
          description: Successfully fetched list of sales
          content:
            application/json:
              schema:
                additionalProperties: false
                $ref: '#/components/schemas/ApartmentSaleCreated'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/housing-companies/{housing_company_id}/apartments/{apartment_id}/sales/{sale_id}:
    get:
      description: Fetch sales for an apartment
      operationId: read-apartment-sale
      tags:
        - Apartments
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - name: apartment_id
          required: true
          in: path
          description: Apartment ID
          schema:
            type: string
            example: b477389cb3514fb1b444052a39bfb65d
        - name: sale_id
          required: true
          in: path
          description: Apartment sale ID
          schema:
            type: string
            example: e65579e3ed0a4cc0b693d9910b41ab08
      responses:
        '200':
          description: Successfully read an apartments sale
          content:
            application/json:
              schema:
                additionalProperties: false
                $ref: '#/components/schemas/ApartmentSale'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      description: Update a sale for an apartment
      operationId: update-apartment-sale
      tags:
        - Apartments
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - name: apartment_id
          required: true
          in: path
          description: Apartment ID
          schema:
            type: string
            example: b477389cb3514fb1b444052a39bfb65d
        - name: sale_id
          required: true
          in: path
          description: Apartment sale ID
          schema:
            type: string
            example: e65579e3ed0a4cc0b693d9910b41ab08
      requestBody:
        required: true
        content:
          application/json:
            schema:
              additionalProperties: false
              $ref: '#/components/schemas/ApartmentSaleUpdate'
      responses:
        '200':
          description: Successfully updated an apartments sale
          content:
            application/json:
              schema:
                additionalProperties: false
                $ref: '#/components/schemas/ApartmentSale'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      description: Remove a sale for an apartment
      operationId: delete-apartment-sale
      tags:
        - Apartments
      parameters:
        - name: housing_company_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - name: apartment_id
          required: true
          in: path
          description: Apartment ID
          schema:
            type: string
            example: b477389cb3514fb1b444052a39bfb65d
        - name: sale_id
          required: true
          in: path
          description: Apartment sale ID
          schema:
            type: string
            example: e65579e3ed0a4cc0b693d9910b41ab08
      responses:
        '204':
          description: Apartment sale successfully removed.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Apartment

  /api/v1/apartments:
    get:
      description: List and search all apartments across all housing companies
      operationId: list-all-apartments
      tags:
        - Apartments
      parameters:
        - $ref: '#/components/parameters/PagingLimitParameter'
        - $ref: '#/components/parameters/PagingPageParameter'
        - name: housing_company_name
          description: Search apartments that belong to housing companies with display name containing the given search string (case-insensitive)
          required: false
          in: query
          schema:
            type: string
            minLength: 2
            example: helmi
        - name: street_address
          description: Search apartments with street address containing the given search string (case-insensitive)
          required: false
          in: query
          schema:
            type: string
            minLength: 2
            example: Hannunkatu
        - name: postal_code
          description: Search apartments located in given postal code
          required: false
          in: query
          schema:
            type: string
            pattern: '^\d{5}$'
            example: "00100"
        - name: owner_name
          description: Search apartments whose owner first name or last name contains the given search string (case-insensitive)
          required: false
          in: query
          schema:
            type: string
            minLength: 2
            example: matti
        - name: owner_identifier
          description: Search apartments whose social security number matches the given search string (case-insensitive)
          required: false
          in: query
          schema:
            type: string
            maxLength: 11
            example: 131052-308T
        - name: has_conditions_of_sale
          description: Filter apartments based on whether there are conditions of sale for its ownerships or not
          required: false
          in: query
          schema:
            type: boolean
            example: true
      responses:
        '200':
          description: Successfully fetched list of apartments
          content:
            application/json:
              schema:
                description: Single page of apartments
                type: object
                additionalProperties: false
                required:
                  - page
                  - contents
                properties:
                  page:
                    $ref: '#/components/schemas/PageInfo'
                  contents:
                    description: List of apartments
                    type: array
                    items:
                      $ref: '#/components/schemas/Apartment'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Owner

  /api/v1/owners:
    get:
      description: Fetch owners
      operationId: list-owners
      tags:
        - Owners
      parameters:
        - name: name
          description: Search owners with name containing the given search string (case-insensitive)
          required: false
          in: query
          schema:
            type: string
            minLength: 2
            example: Matti
        - name: identifier
          description: Search owners whose identifier (social security number, business id, etc) matches the given search string (case-insensitive)
          required: false
          in: query
          schema:
            type: string
            minLength: 11
            maxLength: 11
            example: 131052-308T
        - name: email
          description: Search owners whose email address matches the given search string (case-insensitive)
          required: false
          in: query
          schema:
            type: string
            minLength: 2
            example: matti.meikalainen@example.com
        - $ref: '#/components/parameters/PagingLimitParameter'
        - $ref: '#/components/parameters/PagingPageParameter'
      responses:
        '200':
          description: Successfully fetched list of owners
          content:
            application/json:
              schema:
                description: Single page of owners
                type: object
                additionalProperties: false
                required:
                  - page
                  - contents
                properties:
                  page:
                    $ref: '#/components/schemas/PageInfo'
                  contents:
                    description: List of owners
                    type: array
                    items:
                      $ref: '#/components/schemas/Owner'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      description: Add a new owner
      operationId: create-owner
      tags:
        - Owners
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Owner'
      responses:
        '201':
          description: Successfully added a new owner
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Owner'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/owners/{owner_id}:
    get:
      description: Fetch a single owner by id
      operationId: read-owner
      tags:
        - Owners
      parameters:
        - name: owner_id
          required: true
          in: path
          description: Owner ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      responses:
        '200':
          description: Successfully read a owner details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Owner'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      description: Update a owner
      operationId: update-owner
      tags:
        - Owners
      parameters:
        - name: owner_id
          required: true
          in: path
          description: Owner ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Owner'
      responses:
        '200':
          description: Successfully updated a owner
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Owner'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      description: Remove a owner
      operationId: delete-owner
      tags:
        - Owners
      parameters:
        - name: owner_id
          required: true
          in: path
          description: Owner ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      responses:
        '204':
          description: Owner successfully removed.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Condition of Sale

  /api/v1/conditions-of-sale:
    get:
      description: List all conditions of sale
      operationId: list-conditions-of-sale
      tags:
        - Condition of Sale
      responses:
        '200':
          description: Successfully fetched list of conditions of sale
          content:
            application/json:
              schema:
                description: Single page of conditions of sale
                type: object
                additionalProperties: false
                required:
                  - page
                  - contents
                properties:
                  page:
                    $ref: '#/components/schemas/PageInfo'
                  contents:
                    description: List of apartments
                    type: array
                    items:
                      $ref: '#/components/schemas/ConditionOfSale'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      description: Create new conditions of sale for a household
      operationId: create-conditions-of-sale
      tags:
        - Condition of Sale
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: false
              $ref: '#/components/schemas/ConditionOfSaleCreate'
      responses:
        '201':
          description: All conditions of sale for the owners in the given household, old and new
          content:
            application/json:
              schema:
                description: All created conditions of sale
                type: object
                additionalProperties: false
                required:
                  - conditions_of_sale
                properties:
                  conditions_of_sale:
                    description: List of created conditions of sale
                    type: array
                    items:
                      $ref: '#/components/schemas/ConditionOfSale'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/conditions-of-sale/{condition_of_sale_id}:
    get:
      description: Read a single condition of sale
      operationId: read-conditions-of-sale
      tags:
        - Condition of Sale
      parameters:
        - name: condition_of_sale_id
          required: true
          in: path
          description: Condition of Sale ID
          schema:
            type: string
            example: b477389cb3514fb1b444052a39bfb65d
      responses:
        '200':
          description: Successfully read a condition of sale
          content:
            application/json:
              schema:
                additionalProperties: false
                $ref: '#/components/schemas/ConditionOfSale'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      description: Update a condition of sale
      operationId: update-conditions-of-sale
      tags:
        - Condition of Sale
      parameters:
        - name: condition_of_sale_id
          required: true
          in: path
          description: Condition of Sale ID
          schema:
            type: string
            example: b477389cb3514fb1b444052a39bfb65d
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: false
              $ref: '#/components/schemas/ConditionOfSale'
      responses:
        '200':
          description: Successfully updated a condition of sale
          content:
            application/json:
              schema:
                additionalProperties: false
                $ref: '#/components/schemas/ConditionOfSale'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      description: Remove a condition of sale
      operationId: delete-condition-of-sale
      tags:
        - Condition of Sale
      parameters:
        - name: condition_of_sale_id
          required: true
          in: path
          description: Condition of Sale ID
          schema:
            type: string
            example: b477389cb3514fb1b444052a39bfb65d
      responses:
        '204':
          description: Condition of sale successfully removed.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # External Sales Data

  /api/v1/external-sales-data:

    get:
      description: Read external sales data for the quarter
      operationId: read-external-sales-data
      tags:
        - External Sales Data
      parameters:
        - name: calculation_date
          required: false
          in: query
          description: Calculation date the Excel is needed for, use current date if not given
          schema:
            type: string
            example: 2023-01-01
      responses:
        '200':
          description: Successfully read external sales data for the quarter
          content:
            application/json:
              schema:
                additionalProperties: false
                $ref: '#/components/schemas/ExternalSalesData'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      description: Read cost area sales catalog from statistics center to external sales data
      operationId: create-external-sales-data
      tags:
        - External Sales Data
      requestBody:
        required: true
        content:
          application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
            schema:
              type: string
              format: binary
          application/vnd.ms-excel:
            schema:
              type: string
              format: binary
      responses:
        '201':
          description: Successfully read excel sheet
          content:
            application/json:
              schema:
                additionalProperties: false
                $ref: '#/components/schemas/ExternalSalesData'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptableExcel'
        '409':
          $ref: '#/components/responses/Conflict'
        '415':
          $ref: '#/components/responses/UnsupportedMediaTypeExcel'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Thirty Year Regulation

  /api/v1/thirty-year-regulation:

    get:
      description: Check housing companies over 30 years old whether they should be released from hitas regulation or not.
      operationId: check-regulation
      tags:
        - Thirty Year Regulation
      parameters:
        - name: calculation_date
          required: false
          in: query
          description: Calculation date, use current date if not given
          schema:
            type: string
            example: 2023-01-01
      responses:
        '200':
          description: Successfully performed thirty-year regulation for housing companies
          content:
            application/json:
              schema:
                additionalProperties: false
                $ref: '#/components/schemas/ThirtyYearRegulationResults'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/thirty-year-regulation/reports/download-regulation-letter:
    get:
      description: Download a single housing company's regulation letter as a PDF
      operationId: read-regulation-letter-pdf
      tags:
        - Thirty Year Regulation
      parameters:
        - name: housing_company_id
          required: true
          in: query
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
        - name: calculation_date
          required: false
          in: query
          description: Calculation date for the report, use current date if not given
          schema:
            type: string
            example: 2023-01-01
      responses:
        '200':
          description: Successfully downloaded a regulation letter
          content:
            application/pdf:
              schema:
                type: string
                format: binary
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/thirty-year-regulation/reports/download-regulation-results:
    get:
      description: Download thirty-year regulation results as an Excel
      operationId: read-regulation-report-excel
      tags:
        - Thirty Year Regulation
      parameters:
        - name: calculation_date
          required: false
          in: query
          description: Calculation date of the regulation, use current date if not given
          schema:
            type: string
            example: 2023-01-01
      responses:
        '200':
          description: Successfully downloaded a regulation report
          content:
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: string
                format: binary
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Property Manager

  /api/v1/property-managers:
    get:
      description: Fetch property managers
      operationId: list-property-managers
      tags:
        - Property managers
      parameters:
        - name: name
          description: Search property managers with name containing the given search string (case-insensitive)
          required: false
          in: query
          schema:
            type: string
            minLength: 2
            example: Matti
        - $ref: '#/components/parameters/PagingLimitParameter'
        - $ref: '#/components/parameters/PagingPageParameter'
      responses:
        '200':
          description: Successfully fetched list of property managers
          content:
            application/json:
              schema:
                description: Single page of property managers
                type: object
                additionalProperties: false
                required:
                  - page
                  - contents
                properties:
                  page:
                    $ref: '#/components/schemas/PageInfo'
                  contents:
                    description: List of property managers
                    type: array
                    items:
                      $ref: '#/components/schemas/PropertyManager'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      description: Add a new property manager
      operationId: create-property-manager
      tags:
        - Property managers
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PropertyManager'
      responses:
        '201':
          description: Successfully added a new property manager
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PropertyManager'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/property-managers/{property_manager_id}:
    get:
      description: Fetch a single property manager by id
      operationId: read-property-manager
      tags:
        - Property managers
      parameters:
        - name: property_manager_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      responses:
        '200':
          description: Successfully read a property manager details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PropertyManager'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      description: Update a property manager
      operationId: update-property-manager
      tags:
        - Property managers
      parameters:
        - name: property_manager_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PropertyManager'
      responses:
        '200':
          description: Successfully updated a property manager
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PropertyManager'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      description: Remove a property manager
      operationId: delete-property-manager
      tags:
        - Property managers
      parameters:
        - name: property_manager_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      responses:
        '204':
          description: Housing company successfully removed.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Codes

  /api/v1/developers:
    get:
      description: Fetch developers
      operationId: list-developers
      tags:
        - Developers
      parameters:
        - name: value
          description: Search developers with value containing the given search string (case-insensitive)
          required: false
          in: query
          schema:
            type: string
            minLength: 2
            example: Sato
        - $ref: '#/components/parameters/PagingLimitParameter'
        - $ref: '#/components/parameters/PagingPageParameter'
      responses:
        '200':
          description: Successfully fetched list of developers
          content:
            application/json:
              schema:
                description: Single page of developers
                type: object
                additionalProperties: false
                required:
                  - page
                  - contents
                properties:
                  page:
                    $ref: '#/components/schemas/PageInfo'
                  contents:
                    description: List of developers
                    type: array
                    items:
                      $ref: '#/components/schemas/Code'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      description: Add a new developer
      operationId: create-developer
      tags:
        - Developers
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Code'
      responses:
        '201':
          description: Successfully added a new developer
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Code'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/developers/{developer_id}:
    get:
      description: Fetch a single developer by id
      operationId: read-developer
      tags:
        - Developers
      parameters:
        - name: developer_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      responses:
        '200':
          description: Successfully read a developer details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Code'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      description: Update a developer
      operationId: update-developer
      tags:
        - Developers
      parameters:
        - name: developer_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Code'
      responses:
        '200':
          description: Successfully updated a developer
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Code'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      description: Remove a developer
      operationId: delete-developer
      tags:
        - Developers
      parameters:
        - name: developer_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      responses:
        '204':
          description: Housing company successfully removed.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'


  /api/v1/postal-codes:
    get:
      description: Fetch postal codes
      operationId: list-postal-codes
      tags:
        - Postal codes
      parameters:
        - $ref: '#/components/parameters/PagingLimitParameter'
        - $ref: '#/components/parameters/PagingPageParameter'
      responses:
        '200':
          description: Successfully fetched list of postal codes
          content:
            application/json:
              schema:
                description: Single page of postal codes
                type: object
                additionalProperties: false
                required:
                  - page
                  - contents
                properties:
                  page:
                    $ref: '#/components/schemas/PageInfo'
                  contents:
                    description: List of postal codes
                    type: array
                    items:
                      $ref: '#/components/schemas/HitasPostalCode'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      description: Add a new postal code
      operationId: create-postal-code
      tags:
        - Postal codes
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HitasPostalCode'
      responses:
        '201':
          description: Successfully added a new postal code
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HitasPostalCode'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/postal-codes/{postal_code_id}:
    get:
      description: Fetch a single postal code by id
      operationId: read-postal-code
      tags:
        - Postal codes
      parameters:
        - name: postal_code_id
          required: true
          in: path
          description: Postal code ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      responses:
        '200':
          description: Successfully read a postal code details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HitasPostalCode'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      description: Update a postal code
      operationId: update-postal-code
      tags:
        - Postal codes
      parameters:
        - name: postal_code_id
          required: true
          in: path
          description: Postal code ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HitasPostalCode'
      responses:
        '200':
          description: Successfully updated a postal code
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HitasPostalCode'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      description: Remove a postal code
      operationId: delete-postal-code
      tags:
        - Postal codes
      parameters:
        - name: postal_code_id
          required: true
          in: path
          description: Postal code ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      responses:
        '204':
          description: Postal code successfully removed.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'


  /api/v1/building-types:
    get:
      description: Fetch building types
      operationId: list-building-types
      tags:
        - Building types
      parameters:
        - name: value
          description: Search building types with value containing the given search string (case-insensitive)
          required: false
          in: query
          schema:
            type: string
            minLength: 2
            example: kerrostalo
        - $ref: '#/components/parameters/PagingLimitParameter'
        - $ref: '#/components/parameters/PagingPageParameter'
      responses:
        '200':
          description: Successfully fetched list of building types
          content:
            application/json:
              schema:
                description: Single page of building types
                type: object
                additionalProperties: false
                required:
                  - page
                  - contents
                properties:
                  page:
                    $ref: '#/components/schemas/PageInfo'
                  contents:
                    description: List of building types
                    type: array
                    items:
                      $ref: '#/components/schemas/Code'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      description: Add a new building type
      operationId: create-building-type
      tags:
        - Building types
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Code'
      responses:
        '201':
          description: Successfully added a new building type
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Code'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/building-types/{building_type_id}:
    get:
      description: Fetch a single building type by id
      operationId: read-building-type
      tags:
        - Building types
      parameters:
        - name: building_type_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      responses:
        '200':
          description: Successfully read a building type details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Code'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      description: Update a building type
      operationId: update-building-type
      tags:
        - Building types
      parameters:
        - name: building_type_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Code'
      responses:
        '200':
          description: Successfully updated a building type
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Code'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      description: Remove a building type
      operationId: delete-building-type
      tags:
        - Building types
      parameters:
        - name: building_type_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      responses:
        '204':
          description: Housing company successfully removed.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'


  /api/v1/financing-methods:
    get:
      description: Fetch financing methods
      operationId: list-financing-methods
      tags:
        - Financing methods
      parameters:
        - name: value
          description: Search financing methods with value containing the given search string (case-insensitive)
          required: false
          in: query
          schema:
            type: string
            minLength: 2
            example: Hitas II
        - $ref: '#/components/parameters/PagingLimitParameter'
        - $ref: '#/components/parameters/PagingPageParameter'
      responses:
        '200':
          description: Successfully fetched list of financing methods
          content:
            application/json:
              schema:
                description: Single page of financing methods
                type: object
                additionalProperties: false
                required:
                  - page
                  - contents
                properties:
                  page:
                    $ref: '#/components/schemas/PageInfo'
                  contents:
                    description: List of financing methods
                    type: array
                    items:
                      $ref: '#/components/schemas/Code'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      description: Add a new financing method
      operationId: create-financing-method
      tags:
        - Financing methods
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Code'
      responses:
        '201':
          description: Successfully added a new financing method
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Code'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/financing-methods/{financing_method_id}:
    get:
      description: Fetch a single financing method by id
      operationId: read-financing-method
      tags:
        - Financing methods
      parameters:
        - name: financing_method_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      responses:
        '200':
          description: Successfully read a financing method details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Code'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      description: Update a financing method
      operationId: update-financing-method
      tags:
        - Financing methods
      parameters:
        - name: financing_method_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Code'
      responses:
        '200':
          description: Successfully updated a financing method
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Code'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      description: Remove a financing method
      operationId: delete-financing-method
      tags:
        - Financing methods
      parameters:
        - name: financing_method_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      responses:
        '204':
          description: Housing company successfully removed.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'


  /api/v1/apartment-types:
    get:
      description: Fetch apartment types
      operationId: list-apartment-types
      tags:
        - Apartment types
      parameters:
        - name: value
          description: Search apartment types with value containing the given search string (case-insensitive)
          required: false
          in: query
          schema:
            type: string
            minLength: 2
            example: h+kk
        - $ref: '#/components/parameters/PagingLimitParameter'
        - $ref: '#/components/parameters/PagingPageParameter'
      responses:
        '200':
          description: Successfully fetched list of apartment types
          content:
            application/json:
              schema:
                description: Single page of apartment types
                type: object
                additionalProperties: false
                required:
                  - page
                  - contents
                properties:
                  page:
                    $ref: '#/components/schemas/PageInfo'
                  contents:
                    description: List of apartment types
                    type: array
                    items:
                      $ref: '#/components/schemas/Code'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      description: Add a new apartment type
      operationId: create-apartment-type
      tags:
        - Apartment types
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Code'
      responses:
        '201':
          description: Successfully added a new apartment type
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Code'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/apartment-types/{apartment_type_id}:
    get:
      description: Fetch a single apartment type by id
      operationId: read-apartment-type
      tags:
        - Apartment types
      parameters:
        - name: apartment_type_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      responses:
        '200':
          description: Successfully read an apartment type details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Code'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      description: Update an apartment type
      operationId: update-apartment-type
      tags:
        - Apartment types
      parameters:
        - name: apartment_type_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Code'
      responses:
        '200':
          description: Successfully updated an apartment type
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Code'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      description: Remove an apartment type
      operationId: delete-apartment-type
      tags:
        - Apartment types
      parameters:
        - name: apartment_type_id
          required: true
          in: path
          description: Housing company ID
          schema:
            type: string
            example: a3181b8fa60b47df8ccba0d554a913bb
      responses:
        '204':
          description: Housing company successfully removed.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/hitas-types:
    get:
      description: Fetch hitas types
      operationId: list-hitas-types
      tags:
        - Hitas types
      responses:
        '200':
          description: Successfully fetched list of hitas types
          content:
            application/json:
              schema:
                description: List of hitas types
                type: array
                items:
                  $ref: '#/components/schemas/HitasTypeItem'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/regulation-statuses:
    get:
      description: Fetch regulation statuses
      operationId: list-regulation-status
      tags:
        - Regulation statuses
      responses:
        '200':
          description: Successfully fetched list of regulation statuses
          content:
            application/json:
              schema:
                description: List of hitas types
                type: array
                items:
                  $ref: '#/components/schemas/RegulationStatusItem'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Indices

  /api/v1/indices/{index}:
    get:
      description: Fetch list of indices
      operationId: list-index
      tags:
        - Indices
      parameters:
        - $ref: '#/components/parameters/IndexNameParameter'
        - $ref: '#/components/parameters/PagingLimitParameter'
        - $ref: '#/components/parameters/PagingPageParameter'
        - name: year
          required: false
          in: query
          description: Fetch indices by year
          schema:
            description: Year
            type: integer
            minimum: 1970
            maximum: 2099
            example: 2022-01
      responses:
        '200':
          description: Successfully fetched list of indices
          content:
            application/json:
              schema:
                description: Single page of indices
                type: object
                additionalProperties: false
                required:
                  - page
                  - contents
                properties:
                  page:
                    $ref: '#/components/schemas/PageInfo'
                  contents:
                    description: List of indices
                    type: array
                    items:
                      $ref: '#/components/schemas/Index'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/indices/surface-area-price-ceiling:
    post:
      description: Create new surface area price ceiling for the next three months
      operationId: create-surface-area-price-ceiling
      tags:
        - Indices
      requestBody:
        required: false
        content:
          application/json:
            schema:
              description: Inputs for the calculation
              type: object
              additionalProperties: false
              properties:
                calculation_date:
                  description: Calculation date, use current date if not given
                  type: string
                  example: 2023-01-01
      responses:
        '200':
          description: Successfully created surface area price ceiling for the next three months
          content:
            application/json:
              schema:
                description: List of surface area price ceilings created
                type: array
                minItems: 3
                maxItems: 3
                items:
                  $ref: '#/components/schemas/Index'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/indices/surface-area-price-ceiling/reports/download-surface-area-price-ceiling-results:
    get:
      description: Download surface area price ceiling calculation results as an Excel
      operationId: read-surface-area-price-ceiling-excel
      tags:
        - Indices
      parameters:
        - name: calculation_date
          required: false
          in: query
          description: Calculation date of the surface area price ceiling, use current date if not given
          schema:
            type: string
            example: 2023-01-01
      responses:
        '200':
          description: Successfully downloaded a surface area price ceiling report
          content:
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: string
                format: binary
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/indices/surface-area-price-ceiling-calculation-data:
    get:
      description: List all stored surface area price ceiling calculation data
      operationId: list-surface-area-price-ceiling-calculation-data
      tags:
        - Indices
      responses:
        '200':
          description: Successfully fetched list of surface area price ceiling calculation data
          content:
            application/json:
              schema:
                description: Single page of surface area price ceiling calculation data
                type: object
                additionalProperties: false
                required:
                  - page
                  - contents
                properties:
                  page:
                    $ref: '#/components/schemas/PageInfo'
                  contents:
                    description: List of surface area price ceiling calculation data
                    type: array
                    items:
                      $ref: '#/components/schemas/SurfaceAreaPriceCeilingCalculationResult'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/indices/surface-area-price-ceiling-calculation-data/{calculation_month}:
    get:
      description: Read a sinlge surface area price ceiling calculation data for the given month
      operationId: read-surface-area-price-ceiling-calculation-data
      tags:
        - Indices
      parameters:
        - name: calculation_month
          required: true
          in: path
          description: Calculation month for a surface area price ceiling
          schema:
            type: string
            format: date
            example: 2023-02-01
      responses:
        '200':
          description: Successfully fetched list of surface area price ceiling calculation data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SurfaceAreaPriceCeilingCalculationResult'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/indices/{index}/{month}:
    get:
      description: Read a single index by month
      operationId: read-index
      tags:
        - Indices
      parameters:
        - $ref: '#/components/parameters/IndexNameParameter'
        - name: month
          required: true
          in: path
          description: Month
          schema:
            $ref: '#/components/schemas/YearMonth'
      responses:
        '200':
          description: Successfully read a single index
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Index'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      description: Update index by month
      operationId: update-index
      tags:
        - Indices
      parameters:
        - $ref: '#/components/parameters/IndexNameParameter'
        - name: month
          required: true
          in: path
          description: Month
          schema:
            $ref: '#/components/schemas/YearMonth'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Index'
      responses:
        '200':
          description: Successfully updated a single index
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Index'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '500':
          $ref: '#/components/responses/InternalServerError'

components:
  parameters:
    PagingLimitParameter:
      in: query
      name: limit
      required: false
      schema:
        type: integer
        format: int32
        default: 10
        minimum: 1
        maximum: 100
      description: Specifies how many results are returned per page

    PagingPageParameter:
      in: query
      name: page
      required: false
      schema:
        type: integer
        format: int32
        default: 1
        minimum: 1
      description: Specifies the index of the returned page

    IndexNameParameter:
      in: path
      name: index
      required: true
      schema:
        description: |-
          Index name. Can have one of the following values:

          - maximum-price-index
          - market-price-index
          - market-price-index-2005-equal-100
          - construction-price-index
          - construction-price-index-2005-equal-100
          - surface-area-price-ceiling
        type: string
        example: maximum-price-index
        x-extensible-enum:
          - maximum-price-index
          - market-price-index
          - market-price-index-2005-equal-100
          - construction-price-index
          - construction-price-index-2005-equal-100
          - surface-area-price-ceiling
      description: Specifies the index name used

  schemas:
    PageInfo:
      description: Page metadata
      type: object
      additionalProperties: false
      required:
        - size
        - total_items
        - current_page
        - total_pages
        - links
      properties:
        size:
          description: Size of the returned page
          type: integer
          format: int32
          minimum: 0
          example: 10
        total_items:
          description: Total items across all of the pages
          type: integer
          format: int32
          minimum: 0
          example: 100
        current_page:
          description: Current page number
          type: integer
          format: int32
          minimum: 1
          example: 1
        total_pages:
          description: Total number of pages
          type: integer
          format: int32
          minimum: 0
          example: 5
        links:
          description: Links to other pages
          type: object
          additionalProperties: false
          properties:
            next:
              description: Link to next page
              type: string
              nullable: true
              example: 'https://example.com/api/v1/housing-companies?page=4'
            previous:
              description: Link to previous page
              type: string
              nullable: true
              example: 'https://example.com/api/v1/housing-companies?page=2'

    HousingCompany:
      description: Single housing company
      type: object
      additionalProperties: false
      required:
        - address
        - area
        - date
        - id
        - name
        - state
        - hitas_type
        - exclude_from_statistics
        - regulation_status
        - over_thirty_years_old
        - completed
      properties:
        id:
          description: Housing company ID
          type: string
          example: a3181b8fa60b47df8ccba0d554a913bb
          readOnly: true
        name:
          description: Name of the housing company
          type: string
          example: Taloyhtiö Helmi
          maxLength: 1024
        state:
          $ref: '#/components/schemas/HousingCompanyState'
        hitas_type:
          $ref: '#/components/schemas/HitasType'
        exclude_from_statistics:
          description: Should this housing company's apartments' sales be excluded from statistics?
          type: boolean
          example: false
        regulation_status:
          $ref: '#/components/schemas/RegulationStatus'
        over_thirty_years_old:
          description: Is this housing company over 30 year old?
          type: boolean
          example: false
        completed:
          description: Is this housing company completed?
          type: boolean
          example: false
        address:
          $ref: '#/components/schemas/HitasHousingCompanyAddress'
        area:
          description: Hitas cost area information related to the housing company
          type: object
          additionalProperties: false
          readOnly: true
          required:
            - name
            - cost_area
          properties:
            name:
              description: Area name based on the postal code
              type: string
              example: Helsinki Keskusta - Etu-Töölö
            cost_area:
              description: Hitas cost area based on the postal code
              type: integer
              format: int32
              minimum: 1
              maximum: 4
              example: 1
        date:
          description: Year of first construction based on the housing company's earliest constructed apartment
          type: string
          format: date
          nullable: true
          readOnly: true

    HousingCompanyDetails:
      description: Single housing company's details
      type: object
      additionalProperties: false
      required:
        - address
        - area
        - date
        - id
        - name
        - state
        - hitas_type
        - real_estates
        - summary
        - improvements
      properties:
        id:
          description: Housing company ID
          type: string
          readOnly: true
          example: a3181b8fa60b47df8ccba0d554a913bb
        name:
          description: Name information about the housing company
          type: object
          additionalProperties: false
          required:
            - official
            - display
          properties:
            official:
              description: Official name of the housing company. Better suited for official documents, etc.
              type: string
              maxLength: 1024
              example: As Oy Taloyhtiö Helmi
            display:
              description: Simpler form of official name. Better suited for displaying housing company's name
              type: string
              maxLength: 1024
              example: Taloyhtiö Helmi
        business_id:
          description: Official business ID
          type: string
          nullable: true
          pattern: '^$|^\d{7}-\d$'
          example: 1234567-1
        state:
          $ref: '#/components/schemas/HousingCompanyState'
        hitas_type:
          $ref: '#/components/schemas/HitasType'
        exclude_from_statistics:
          description: Should this housing company's apartments' sales be excluded from statistics?
          type: boolean
          example: false
        regulation_status:
          $ref: '#/components/schemas/RegulationStatus'
        over_thirty_years_old:
          description: Is this housing company over 30 year old?
          type: boolean
          example: false
        completed:
          description: Is this housing company completed?
          type: boolean
          example: false
        address:
          $ref: '#/components/schemas/HitasHousingCompanyAddress'
        area:
          description: Hitas cost area information related to the housing company
          type: object
          additionalProperties: false
          readOnly: true
          required:
            - name
            - cost_area
          properties:
            name:
              description: Area name based on the postal code
              type: string
              example: Helsinki Keskusta - Etu-Töölö
            cost_area:
              description: Hitas cost area based on the postal code
              type: integer
              format: int32
              minimum: 1
              maximum: 4
              example: 1
        date:
          description: Year of first construction based on the housing company's earliest constructed building
          type: string
          format: date
          nullable: true
          readOnly: true
        financing_method:
          $ref: '#/components/schemas/ReadOnlyCode'
        building_type:
          $ref: '#/components/schemas/ReadOnlyCode'
        developer:
          $ref: '#/components/schemas/ReadOnlyCode'
        property_manager:
          nullable: true
          $ref: '#/components/schemas/ReadOnlyPropertyManager'
        summary:
          description: Summary data for this housing company across all apartments
          type: object
          additionalProperties: false
          readOnly: true
          required:
            - average_price_per_square_meter
            - total_surface_area
            - total_shares
          properties:
            average_price_per_square_meter:
              description: Average square meter price
              type: number
              minimum: 0
              example: 123000
            realized_acquisition_price:
              description: Realized acquisition price
              type: number
              minimum: 0
              example: 112000.00
            total_surface_area:
              description: Total surface area across all apartments
              type: number
              minimum: 0
              example: 20452.2
            total_shares:
              description: Total number of shares across all apartments
              type: number
              minimum: 0
              example: 98500
        acquisition_price:
          description: Initial acquisition price of the housing company
          type: number
          format: float
          minimum: 0
          example: 112000.00
        primary_loan:
          description: Primary loan
          type: number
          format: float
          nullable: true
          example: 112000.00
        sales_price_catalogue_confirmation_date:
          description: Sales price catalogue confirmation date
          type: string
          format: date
          nullable: true
        notification_date:
          description: Notification date
          type: string
          format: date
          nullable: true
          readOnly: true
        archive_id:
          description: Archive ID for this housing company
          type: integer
          readOnly: true
          minimum: 1
        notes:
          description: Optional notes for this housing company
          type: string
        last_modified:
          description: Last modified information
          type: object
          additionalProperties: false
          readOnly: true
          required:
            - user
            - datetime
          properties:
            user:
              description: User who last modified this housing company
              type: object
              additionalProperties: false
              required:
                - username
                - first_name
                - last_name
              properties:
                username:
                  description: Username of this user
                  type: string
                  example: mameik01
                first_name:
                  description: First name of this user
                  type: string
                  nullable: true
                  example: Matti
                last_name:
                  description: Last name of this user
                  type: string
                  nullable: true
                  example: Meikäläinen
            datetime:
              description: When this housing company was last modified
              type: string
              format: date-time
        real_estates:
          description: List of real estates this housing company has
          type: array
          readOnly: true
          items:
            $ref: '#/components/schemas/RealEstate'
        improvements:
          description: Contains housing company improvements
          type: object
          additionalProperties: false
          required:
            - market_price_index
            - construction_price_index
          properties:
            market_price_index:
              description: List of improvements for market price index
              type: array
              items:
                description: Improvement
                type: object
                additionalProperties: false
                required:
                  - name
                  - value
                  - completion_date
                properties:
                  name:
                    description: Name of this improvement
                    type: string
                    example: Hissisaneeraus
                  value:
                    description: Original value of this improvement
                    type: number
                    minimum: 0
                    example: 78284.25
                  completion_date:
                    $ref: '#/components/schemas/YearMonth'
                  no_deductions:
                    description: Should this improvement be exempt from all deductions (excess, deprecation)
                    type: boolean
            construction_price_index:
              description: List of improvements for construction price index
              type: array
              items:
                description: Improvement
                type: object
                additionalProperties: false
                required:
                  - name
                  - value
                  - completion_date
                properties:
                  name:
                    description: Name of this improvement
                    type: string
                    example: Liittyminen HTV-verkkoon
                  value:
                    description: Original value of this improvement
                    type: number
                    minimum: 0
                    example: 13359.75
                  completion_date:
                    $ref: '#/components/schemas/YearMonth'

    RealEstate:
      description: Single real estate
      type: object
      additionalProperties: false
      required:
        - id
        - property_identifier
        - address
        - buildings
      properties:
        id:
          description: ID of this building
          type: string
          readOnly: true
          example: c86eaa399ce141d89d962d46bb81ab2b
        property_identifier:
          description: This real estate's official property identifier
          type: string
          pattern: '^\d{1,4}-\d{1,4}-\d{1,4}-\d{1,4}$'
        address:
          $ref: '#/components/schemas/HitasAddress'
        buildings:
          description: List of buildings this real estate has
          type: array
          readOnly: true
          items:
            $ref: '#/components/schemas/Building'

    Building:
      description: Single building
      type: object
      additionalProperties: false
      required:
        - id
        - address
      properties:
        id:
          description: ID of this building
          type: string
          readOnly: true
          example: 9d0ac35b01eb44829bc84c25f7c1813a
        address:
          $ref: '#/components/schemas/HitasAddress'
        building_identifier:
          description: This building's official identifier
          type: string
          pattern: '^$|^1\d{8}[A-Za-z0-9]$|^\d{1,4}-\d{1,4}-\d{1,4}-\d{1,4} [A-Za-z0-9] \d{3}$'
          nullable: true
          example: 100012345A
        apartment_count:
          description: How many apartments are in this building
          type: integer
          minimum: 0
          example: 4

    MinimalHousingCompany:
      description: Housing company identifier
      type: object
      additionalProperties: false
      required:
        - id
        - name
      properties:
        id:
          description: Housing company ID
          type: string
          example: a3181b8fa60b47df8ccba0d554a913bb
          readOnly: true
        name:
          description: Name of the housing company
          type: string
          example: Taloyhtiö Helmi
          maxLength: 1024

    Apartment:
      description: Single apartment
      type: object
      additionalProperties: false
      required:
        - id
        - state
        - surface_area
        - address
        - completion_date
        - ownerships
        - has_conditions_of_sale
        - has_grace_period
        - sell_by_date
        - links
      properties:
        id:
          description: Apartment ID
          type: string
          example: b477389cb3514fb1b444052a39bfb65d
        state:
          nullable: true
          $ref: '#/components/schemas/ApartmentState'
        type:
          description: Apartment type
          type: string
          example: h+k
          nullable: true
        surface_area:
          description: Surface area of the apartment measured in square meters
          type: number
          nullable: true
          minimum: 0
          example: 67
        rooms:
          description: The amount of rooms in this apartment
          type: number
          nullable: true
          minimum: 1
          example: 4
        address:
          $ref: '#/components/schemas/ApartmentAddress'
        completion_date:
          description: Date that the apartment was completed on
          type: string
          format: date
          nullable: true
        ownerships:
          description: List of apartment's ownerships
          type: array
          items:
            $ref: '#/components/schemas/Ownership'
        has_conditions_of_sale:
          description: Does this apartment have any conditions of sale
          type: boolean
        has_grace_period:
          description: Do any of the conditions of sale related to this apartment have a grace period set?
          type: boolean
        sell_by_date:
          description: |-
            The date when this apartment needs to be sold to fulfill a condition of sale linked to this apartment's
            ownership(s). In case of multiple conditions of sale, use the first one in chronological order.
            The value will be null if there are no current conditions of sale for this apartment's ownerships.
          type: string
          format: date
          nullable: true
          readOnly: true
        links:
          readOnly: true
          $ref: '#/components/schemas/ApartmentLinks'

    ApartmentDetails:
      description: Single apartment details
      type: object
      additionalProperties: false
      required:
        - id
        - state
        - surface_area
        - shares
        - address
        - completion_date
        - ownerships
        - links
        - building
        - notes
        - improvements
        - conditions_of_sale
        - sell_by_date
      properties:
        id:
          description: Apartment ID
          type: string
          readOnly: true
          example: b477389cb3514fb1b444052a39bfb65d
        state:
          nullable: true
          $ref: '#/components/schemas/ApartmentState'
        type:
          nullable: true
          $ref: '#/components/schemas/NullableReadOnlyCode'
        surface_area:
          description: Surface area of the apartment measured in square meters
          type: number
          nullable: true
          minimum: 0
          example: 67
        rooms:
          description: The amount of rooms in this apartment
          type: number
          nullable: true
          minimum: 1
          example: 4
        shares:
          description: Share information
          type: object
          additionalProperties: false
          nullable: true
          required:
            - start
            - end
            - total
          properties:
            start:
              description: First share number
              type: integer
              nullable: true
              minimum: 0
              example: 100
            end:
              description: Last share number
              type: integer
              nullable: true
              minimum: 0
              example: 150
            total:
              description: Total number of shares
              type: integer
              minimum: 0
              readOnly: true
              example: 50
        address:
          $ref: '#/components/schemas/ApartmentAddress'
        completion_date:
          description: Date that the apartment's building was completed on
          type: string
          format: date
          nullable: true
        prices:
          $ref: '#/components/schemas/ApartmentPrices'
        ownerships:
          description: List of apartment's ownerships
          type: array
          items:
            $ref: '#/components/schemas/Ownership'
        links:
          readOnly: true
          $ref: '#/components/schemas/ApartmentLinks'
        building:
          description: Building this apartment is associated with
          type: object
          additionalProperties: false
          writeOnly: true
          properties:
            id:
              writeOnly: true
              description: Building ID this apartment is associated with
              type: string
              example: dc1072975bab4ba69f64814f021c6785
        notes:
          description: Apartment notes
          type: string
          nullable: true
          example: Random notes about the apartment...
        improvements:
          description: Contains housing company improvements
          type: object
          additionalProperties: false
          required:
            - market_price_index
            - construction_price_index
          properties:
            market_price_index:
              description: List of improvements for market price index
              type: array
              items:
                description: Improvement
                type: object
                additionalProperties: false
                required:
                  - name
                  - value
                  - completion_date
                properties:
                  name:
                    description: Name of this improvement
                    type: string
                    example: Hissisaneeraus
                  value:
                    description: Original value of this improvement
                    type: number
                    minimum: 0
                    example: 78284.61
                  completion_date:
                    $ref: '#/components/schemas/YearMonth'
                  no_deductions:
                    description: Should this improvement be exempt from all deductions (excess, deprecation)
                    type: boolean
            construction_price_index:
              description: List of improvements for construction price index
              type: array
              items:
                description: Improvement
                type: object
                additionalProperties: false
                required:
                  - name
                  - value
                  - completion_date
                  - depreciation_percentage
                properties:
                  name:
                    description: Name of this improvement
                    type: string
                    example: Liittyminen HTV-verkkoon
                  value:
                    description: Original value of this improvement
                    type: number
                    minimum: 0
                    example: 13359.98
                  completion_date:
                    $ref: '#/components/schemas/YearMonth'
                  depreciation_percentage:
                    description: |-
                      Depreciation percentage.

                      Can have the following values:
                      - 0
                      - 2.5
                      - 10
                    type: number
                    example: 10.0
                    x-extensible-enum:
                      - 0
                      - 2.5
                      - 10
        conditions_of_sale:
          readOnly: true
          type: array
          items:
            $ref: '#/components/schemas/ApartmentConditionOfSale'
        sell_by_date:
          description: |-
            The date when this apartment needs to be sold to fulfill a condition of sale linked to this apartment's
            ownership(s). In case of multiple conditions of sale, use the first one in chronological order.
            The value will be null if there are no current conditions of sale for this apartment's ownerships.
          type: string
          format: date
          nullable: true
          readOnly: true

    ApartmentMaximumPriceCalculation:
      description: Calculations for particular index
      type: object
      additionalProperties: false
      required:
        - calculation_variables
        - maximum_price
        - maximum
        - valid_until
      properties:
        calculation_variables:
          oneOf:
            - $ref: '#/components/schemas/ApartmentMaximumPriceCalculationVars2011Onwards'
            - $ref: '#/components/schemas/ApartmentMaximumPriceCalculationVarsBefore2011MarketPriceIndex'
            - $ref: '#/components/schemas/ApartmentMaximumPriceCalculationVarsBefore2011ConstructionPriceIndex'
        maximum_price:
          description: Maximum price for this index
          type: number
          minimum: 0
          example: 223558.95
        valid_until:
          description: The date until this maximum price calculation is valid.
          type: string
          format: date
          example: 2022-10-05
        maximum:
          description: Is this calculated maximum price the highest maximum price.
          type: boolean
          example: true

    ApartmentMaximumPriceCalculationVars2011Onwards:
      description: Variables used for apartment's maximum price calculations
      type: object
      required:
        - first_sale_acquisition_price
        - additional_work_during_construction
        - basic_price
        - index_adjustment
        - housing_company_improvements
        - debt_free_price
        - debt_free_price_m2
        - apartment_share_of_housing_company_loans
        - apartment_share_of_housing_company_loans_date
        - completion_date
        - completion_date_index
        - calculation_date
        - calculation_date_index
      properties:
        first_sale_acquisition_price:
          description: Apartment's acquisition price
          type: number
          minimum: 0
          example: 199500.03
        additional_work_during_construction:
          description: Amount of apartment's additional work done during construction
          type: number
          minimum: 0
          example: 0.0
        basic_price:
          description: |-
            Basic price is sum of the apartment's acquisition price and the apartment's
            additional work during construction.
          type: number
          minimum: 0
          example: 199500.21
        index_adjustment:
          description: |-
            Value increase of the apartment based on the index. Calculated by dividing the
            calculation date index value with the apartment's completion date's index value
            and multiplying the result with the apartment's basic price.
          type: number
          minimum: 0
          example: 26401.54
        housing_company_improvements:
          $ref: '#/components/schemas/ApartmentMaximumPriceImprovements2011Onwards'
        debt_free_price:
          description: |-
            Sum of basic price, index adjustment, apartment improvements and housing company
            improvements.
          type: number
          minimum: 0
          example: 226058.97
        debt_free_price_m2:
          description: |-
            Debt free price divided by the apartment's surface area.
          type: number
          minimum: 0
          example: 7535.57
        apartment_share_of_housing_company_loans:
          description: |-
            How much the apartment's share of the housing company loans.
          type: integer
          minimum: 0
          example: 2500
        apartment_share_of_housing_company_loans_date:
          description: Date for the apartment share of housing company loan
          type: string
          format: date
          example: "2022-07-28"
        completion_date:
          description: The date the apartment was completed.
          type: string
          format: date
          example: "2019-11-27"
        completion_date_index:
          description: The index value on the apartment's completion date.
          type: number
          minimum: 0
          example: 129.29
        calculation_date:
          description: Maximum price calculation date.
          type: string
          format: date
          example: "2022-07-05"
        calculation_date_index:
          description: The index value on the calculation date.
          type: number
          minimum: 0
          example: 146.4

    ApartmentMaximumPriceCalculationVarsBefore2011MarketPriceIndex:
      description: Variables used for apartment's maximum price calculations
      type: object
      required:
        - first_sale_acquisition_price
        - basic_price
        - interest_during_construction
        - additional_work_during_construction
        - index_adjustment
        - apartment_improvements
        - housing_company_improvements
        - debt_free_price
        - debt_free_price_m2
        - apartment_share_of_housing_company_loans
        - apartment_share_of_housing_company_loans_date
        - completion_date
        - completion_date_index
        - calculation_date
        - calculation_date_index
      properties:
        first_sale_acquisition_price:
          description: Apartment's acquisition price
          type: number
          minimum: 0
          example: 199500.03
        basic_price:
          description: |-
            Basic price is sum of the apartment's acquisition price and the apartment's
            additional work during construction.
          type: number
          minimum: 0
          example: 199500.21
        interest_during_construction:
          description: Amount of interest accumulated during construction of the apartment
          type: number
          minimum: 0
          example: 1802.88
        additional_work_during_construction:
          description: Amount of apartment's additional work done during construction
          type: number
          minimum: 0
          example: 0.0
        index_adjustment:
          description: |-
            Value increase of the apartment based on the index. Calculated by dividing the
            calculation date index value with the apartment's completion date's index value
            and multiplying the result with the apartment's basic price.
          type: number
          minimum: 0
          example: 26401.54
        apartment_improvements:
          $ref: '#/components/schemas/ApartmentMaximumPriceMarketPriceIndexApartmentImprovements'
        housing_company_improvements:
          $ref: '#/components/schemas/ApartmentMaximumPriceMarketPriceIndexHousingCompanyImprovements'
        debt_free_price:
          description: |-
            Sum of basic price, index adjustment, apartment improvements and housing company
            improvements.
          type: number
          minimum: 0
          example: 226058.97
        debt_free_price_m2:
          description: |-
            Debt free price divided by the apartment's surface area.
          type: number
          minimum: 0
          example: 7535.57
        apartment_share_of_housing_company_loans:
          description: |-
            How much the apartment's share of the housing company loans.
          type: integer
          minimum: 0
          example: 2500
        apartment_share_of_housing_company_loans_date:
          description: Date for the apartment share of housing company loan
          type: string
          format: date
          example: "2022-07-28"
        completion_date:
          description: The date the apartment was completed.
          type: string
          format: date
          example: "2019-11-27"
        completion_date_index:
          description: The index value on the apartment's completion date.
          type: number
          minimum: 0
          example: 129.29
        calculation_date:
          description: Maximum price calculation date.
          type: string
          format: date
          example: "2022-07-05"
        calculation_date_index:
          description: The index value on the calculation date.
          type: number
          minimum: 0
          example: 146.4

    ApartmentMaximumPriceCalculationVarsBefore2011ConstructionPriceIndex:
      description: Variables used for apartment's maximum price calculations
      type: object
      required:
        - housing_company_acquisition_price
        - housing_company_assets
        - apartment_share_of_housing_company_assets
        - interest_during_construction
        - additional_work_during_construction
        - index_adjusted_additional_work_during_construction
        - apartment_improvements
        - housing_company_improvements
        - debt_free_price
        - debt_free_price_m2
        - apartment_share_of_housing_company_loans
        - apartment_share_of_housing_company_loans_date
        - completion_date
        - completion_date_index
        - calculation_date
        - calculation_date_index
      properties:
        housing_company_acquisition_price:
          description: Housing company's realized acquisition price
          type: number
          minimum: 0
          example: 199500.03
        housing_company_assets:
          description: Housing company's assets (realized acquisition price and improvements)
          type: number
          minimum: 0
          example: 199500.03
        apartment_share_of_housing_company_assets:
          description: This apartment's share of housing company's assets
          type: number
          minimum: 0
          example: 199500.03
        interest_during_construction:
          description: Apartment's interest during construction
          type: number
          minimum: 0
          example: 1802.88
        additional_work_during_construction:
          description: Amount of apartment's additional work done during construction
          type: number
          minimum: 0
          example: 0.0
        index_adjusted_additional_work_during_construction:
          description: Amount of apartment's additional work done during construction, after index adjustment
          type: number
          minimum: 0
          example: 0.0
        apartment_improvements:
          $ref: '#/components/schemas/ApartmentMaximumPriceConstructionPriceIndexApartmentImprovements'
        housing_company_improvements:
          $ref: '#/components/schemas/ApartmentMaximumPriceConstructionPriceIndexHousingCompanyImprovements'
        debt_free_price:
          description: |-
            Sum of basic price, index adjustment, apartment improvements and housing company
            improvements.
          type: number
          minimum: 0
          example: 226058.97
        debt_free_price_m2:
          description: |-
            Debt free price divided by the apartment's surface area.
          type: number
          minimum: 0
          example: 7535.57
        apartment_share_of_housing_company_loans:
          description: |-
            How much the apartment's share of the housing company loans.
          type: integer
          minimum: 0
          example: 2500
        apartment_share_of_housing_company_loans_date:
          description: Date for the apartment share of housing company loan
          type: string
          format: date
          example: "2022-07-28"
        completion_date:
          description: The date the apartment was completed.
          type: string
          format: date
          example: "2019-11-27"
        completion_date_index:
          description: The index value on the apartment's completion date.
          type: number
          minimum: 0
          example: 129.29
        calculation_date:
          description: Maximum price calculation date.
          type: string
          format: date
          example: "2022-07-05"
        calculation_date_index:
          description: The index value on the calculation date.
          type: number
          minimum: 0
          example: 146.4

    ApartmentMaximumPriceImprovements2011Onwards:
      description: Improvement information used in the calculation
      type: object
      additionalProperties: false
      required:
        - items
        - summary
      properties:
        items:
          description: List of improvements
          type: array
          items:
            description: Single improvement
            type: object
            additionalProperties: false
            required:
              - name
              - value
              - completion_date
              - value_for_housing_company
              - value_for_apartment
            properties:
              name:
                description: Name of this improvement
                type: string
                example: Liittyminen HTV-verkkoon
              value:
                description: Original value of this improvement
                type: number
                minimum: 0
                example: 13359.93
              completion_date:
                description: Original value of this improvement
                type: string
                format: date
                example: 2022-07-05
              value_added:
                description: Improvement value minus the excess
                type: number
                minimum: 0
                example: 20040.00
              value_for_housing_company:
                description: Housing company's share of the improvement's value (adjusted to index)
                type: number
                minimum: 0
                example: 22707.86
              value_for_apartment:
                description: Apartment share of the improvement's value (adjusted to index)
                type: number
                minimum: 0
                example: 157.26
        summary:
          description: Summary data across all improvements
          type: object
          additionalProperties: false
          required:
            - value
            - value_added
            - excess
            - value_for_housing_company
            - value_for_apartment
          properties:
            value:
              description: Sum of improvement values
              type: number
              minimum: 0
              example: 13359.85
            value_added:
              description: Sum of improvement value added
              type: number
              minimum: 0
              example: 13359.00
            excess:
              description: Excess information
              type: object
              additionalProperties: false
              required:
                - surface_area
                - value_per_square_meter
                - total
              properties:
                surface_area:
                  description: Apartment's surface area
                  type: number
                  minimum: 0
                  example: 4332.0
                value_per_square_meter:
                  description: Excess value per square meter
                  type: number
                  minimum: 0
                  example: 30.0
                total:
                  description: Excess value per square meter multiplied by apartment's surface area
                  type: number
                  minimum: 0
                  example: 129960.0
            value_for_housing_company:
              description: Sum of housing company's share of the improvement's value (adjusted to index)
              type: number
              minimum: 0
              example: 22707.86
            value_for_apartment:
              description: Sum of apartment share of the improvement's value (adjusted to index)
              type: number
              minimum: 0
              example: 157.0

    ApartmentMaximumPriceConstructionPriceIndexHousingCompanyImprovements:
      description: Improvement information used in the calculation
      type: object
      additionalProperties: false
      required:
        - items
        - summary
      properties:
        items:
          description: List of improvements
          type: array
          items:
            description: Single improvement
            type: object
            additionalProperties: false
            required:
              - name
              - value
              - value_for_apartment
              - completion_date
            properties:
              name:
                description: Name of this improvement
                type: string
                example: Liittyminen HTV-verkkoon
              value:
                description: Original value of this improvement
                type: number
                minimum: 0
                example: 13359.93
              value_for_apartment:
                description: Housing company improvement's value for this apartment
                type: number
                minimum: 0
                example: 20040.00
              completion_date:
                description: Date that the improvement was completed on
                type: string
                format: date
        summary:
          description: Summary data across all improvements
          type: object
          additionalProperties: false
          required:
            - value
            - value_for_apartment
          properties:
            value:
              description: Sum of improvement values
              type: number
              minimum: 0
              example: 13359.85
            value_for_apartment:
              description: Sum of all housing company improvement's values for this apartment
              type: number
              minimum: 0
              example: 157.0

    ApartmentMaximumPriceMarketPriceIndexHousingCompanyImprovements:
      description: Improvement information used in the calculation
      type: object
      additionalProperties: false
      required:
        - items
        - summary
      properties:
        items:
          description: List of improvements
          type: array
          items:
            description: Single improvement
            type: object
            additionalProperties: false
            required:
              - name
              - value
              - completion_date
              - value_without_excess
              - depreciation
              - accepted_value_for_housing_company
              - accepted_value
              - no_deductions
            properties:
              name:
                description: Name of this improvement
                type: string
                example: Liittyminen HTV-verkkoon
              value:
                description: Original value of this improvement
                type: number
                minimum: 0
                example: 13359.93
              completion_date:
                description: Completion date of this improvement
                type: string
                format: date
                example: 2016-12-04
              value_without_excess:
                description: Improvement value minus the excess
                type: number
                minimum: 0
                example: 20040.00
              depreciation:
                description: Improvement depreciation
                type: object
                additionalProperties: false
                required:
                  - amount
                  - time
                properties:
                  amount:
                    description: Amount the value has reduced based on the depreciation calculation.
                    type: number
                    minimum: 0
                    example: 3965.69
                  time:
                    description: Amount of time in months the improvement has depreciated
                    type: object
                    additionalProperties: false
                    required:
                      - years
                      - months
                    properties:
                      years:
                        description: How many years (in addition to months) this improvement has depreciated
                        type: integer
                        minimum: 0
                        example: 13
                      months:
                        description: How many months (in addition to years) this improvement has depreciated
                        type: integer
                        minimum: 0
                        maximum: 11
                        example: 7
              accepted_value_for_housing_company:
                description: Accepted value for the whole housing company
                type: number
                minimum: 0
                example: 157.26
              accepted_value:
                description: Apartment's share of housing company's accepted value
                type: number
                minimum: 0
                example: 157.26
              no_deductions:
                description: Should this improvement be exempt from all deductions (excess, deprecation)
                type: boolean
        summary:
          description: Summary data across all improvements
          type: object
          additionalProperties: false
          required:
            - value
            - value_without_excess
            - excess
            - depreciation
            - accepted_value_for_housing_company
            - accepted_value
          properties:
            value:
              description: Sum of improvement values
              type: number
              minimum: 0
              example: 13359.85
            value_without_excess:
              description: Sum of improvement value added
              type: number
              minimum: 0
              example: 13359.00
            excess:
              description: Excess information
              type: object
              additionalProperties: false
              required:
                - surface_area
                - value_per_square_meter_before_2010
                - value_per_square_meter_after_2010
                - total_before_2010
                - total_after_2010
              properties:
                surface_area:
                  description: Apartment's surface area
                  type: number
                  minimum: 0
                  example: 4332.0
                value_per_square_meter_before_2010:
                  description: Excess value per square meter before 2010, null if not used
                  type: number
                  minimum: 0
                  nullable: true
                  example: 150.0
                value_per_square_meter_after_2010:
                  description: Excess value per square meter on or after 2010, null if not used
                  type: number
                  minimum: 0
                  nullable: true
                  example: 30.0
                total_before_2010:
                  description: Excess value before 2010 per square meter multiplied by apartment's surface area, null if not used
                  type: number
                  minimum: 0
                  nullable: true
                  example: 649800.0
                total_after_2010:
                  description: Excess value on or after 2010 per square meter multiplied by apartment's surface area, null if not used
                  type: number
                  minimum: 0
                  nullable: true
                  example: 129960.0
            depreciation:
              description: Sum of improvement value minus the excess
              type: number
              minimum: 0
              example: 0.0
            accepted_value_for_housing_company:
              description: Sum of all accepted values for the whole housing company
              type: number
              minimum: 0
              example: 15700.0
            accepted_value:
              description: Sum of apartment share of the improvement's value (adjusted to index)
              type: number
              minimum: 0
              example: 1570.0

    ApartmentMaximumPriceMarketPriceIndexApartmentImprovements:
      description: Improvement information used in the calculation
      type: object
      additionalProperties: false
      required:
        - items
        - summary
      properties:
        items:
          description: List of improvements
          type: array
          items:
            description: Single improvement
            type: object
            additionalProperties: false
            required:
              - name
              - value
              - completion_date
              - value_without_excess
              - depreciation
              - accepted_value
              - no_deductions
            properties:
              name:
                description: Name of this improvement
                type: string
                example: Liittyminen HTV-verkkoon
              value:
                description: Original value of this improvement
                type: number
                minimum: 0
                example: 13359.93
              completion_date:
                description: Completion date of this improvement
                type: string
                format: date
                example: 2016-12-04
              value_without_excess:
                description: Improvement value minus the excess
                type: number
                minimum: 0
                example: 20040.00
              depreciation:
                description: Improvement depreciation
                type: object
                additionalProperties: false
                required:
                  - amount
                  - time
                properties:
                  amount:
                    description: Amount the value has reduced based on the depreciation calculation.
                    type: number
                    minimum: 0
                    example: 3965.69
                  time:
                    description: Amount of time in months the improvement has depreciated
                    type: object
                    additionalProperties: false
                    required:
                      - years
                      - months
                    properties:
                      years:
                        description: How many years (in addition to months) this improvement has depreciated
                        type: integer
                        minimum: 0
                        example: 13
                      months:
                        description: How many months (in addition to years) this improvement has depreciated
                        type: integer
                        minimum: 0
                        maximum: 11
                        example: 7
              accepted_value:
                description: Final accepted value for the apartment. Original value with excess and depreciation reduced
                type: number
                minimum: 0
                example: 157.26
              no_deductions:
                description: Should this improvement be exempt from all deductions (excess, deprecation)
                type: boolean
        summary:
          description: Summary data across all improvements
          type: object
          additionalProperties: false
          required:
            - value
            - value_without_excess
            - excess
            - depreciation
            - accepted_value
          properties:
            value:
              description: Sum of improvement values
              type: number
              minimum: 0
              example: 13359.85
            value_without_excess:
              description: Sum of improvement value added
              type: number
              minimum: 0
              example: 13359.00
            excess:
              description: Excess information
              type: object
              additionalProperties: false
              required:
                - surface_area
                - value_per_square_meter
                - total
              properties:
                surface_area:
                  description: Apartment's surface area
                  type: number
                  minimum: 0
                  example: 4332.0
                value_per_square_meter:
                  description: Excess value per square meter
                  type: number
                  minimum: 0
                  example: 30.0
                total:
                  description: Excess value per square meter multiplied by apartment's surface area
                  type: number
                  minimum: 0
                  example: 129960.0
            depreciation:
              description: Sum of improvement value minus the excess
              type: number
              minimum: 0
              example: 0.0
            accepted_value:
              description: Sum of apartment share of the improvement's value
              type: number
              minimum: 0
              example: 157.0

    ApartmentMaximumPriceConstructionPriceIndexApartmentImprovements:
      description: Improvement information used in the calculation
      type: object
      additionalProperties: false
      required:
        - items
        - summary
      properties:
        items:
          description: List of improvements
          type: array
          items:
            description: Single improvement
            type: object
            additionalProperties: false
            required:
              - name
              - value
              - completion_date
              - completion_date_index
              - calculation_date_index
              - depreciation
              - index_adjusted
              - value_for_apartment
            properties:
              name:
                description: Name of this improvement
                type: string
                example: Liittyminen HTV-verkkoon
              value:
                description: Original value of this improvement
                type: number
                minimum: 0
                example: 13359.93
              completion_date:
                description: Completion date of this improvement
                type: string
                format: date
                example: 2016-12-04
              completion_date_index:
                description: Completion date of this improvement
                type: number
                example: 157.1
              calculation_date_index:
                description: Completion date of this improvement
                type: number
                example: 196.42
              depreciation:
                description: Improvement depreciation
                type: object
                additionalProperties: false
                required:
                  - amount
                  - percentage
                  - time
                properties:
                  amount:
                    description: Amount the value has reduced based on the depreciation calculation.
                    type: number
                    minimum: 0
                    example: 3965.69
                  percentage:
                    description: This improvement's depreciation percentage
                    type: number
                    minimum: 0
                    example: 6.0
                  time:
                    description: Amount of time in months the improvement has depreciated
                    type: object
                    additionalProperties: false
                    required:
                      - years
                      - months
                    properties:
                      years:
                        description: How many years (in addition to months) this improvement has depreciated
                        type: integer
                        minimum: 0
                        example: 13
                      months:
                        description: How many months (in addition to years) this improvement has depreciated
                        type: integer
                        minimum: 0
                        maximum: 11
                        example: 7
              index_adjusted:
                description: Index adjusted value of this improvement
                type: number
                minimum: 0
                example: 20040.00
              value_for_apartment:
                description: Final value for this improvement (index adjusted value minus the depreciation)
                type: number
                minimum: 0
                example: 157.26
        summary:
          description: Summary data across all improvements
          type: object
          additionalProperties: false
          required:
            - value
            - depreciation
            - index_adjusted
            - value_for_apartment
          properties:
            value:
              description: Sum of improvement values
              type: number
              minimum: 0
              example: 13359.85
            depreciation:
              description: Sum of improvement value minus the excess
              type: number
              minimum: 0
              example: 0.0
            index_adjusted:
              description: Sum of all index adjusted values
              type: number
              minimum: 0
              example: 0.0
            value_for_apartment:
              description: Sum of all values for apartments
              type: number
              minimum: 0
              example: 157.0

    ApartmentMaximumPrice:
      description: Single apartment's maximum price calculations
      type: object
      additionalProperties: false
      required:
        - id
        - confirmed_at
        - calculation_date
        - maximum_price
        - maximum_price_per_square
        - index
        - new_hitas
        - created_at
        - valid_until
        - calculations
      properties:
        id:
          description: Maximum price calculation ID
          type: string
          example: e65579e3ed0a4cc0b693d9910b41ab08
        maximum_price:
          description: The maximum price for this apartment.
          type: number
          minimum: 0
          example: 223558.87
        maximum_price_per_square:
          description: The maximum price per square meter for this apartment.
          type: number
          minimum: 0
          example: 7451.96
        created_at:
          description: The timestamp when this maximum price calculation was done.
          type: string
          format: date-time
          example: 2022-07-05T15:39:50.742380
        calculation_date:
          description: The timestamp when this maximum price calculation was done.
          type: string
          format: date
          example: 2022-07-05
        confirmed_at:
          description: The timestamp when this maximum price calculation was confirmed.
          type: string
          format: date-time
          nullable: true
          example: 2022-07-05T15:42:39.64745
        valid_until:
          description: The date until this maximum price calculation is valid.
          type: string
          format: date
          example: 2022-10-05
        index:
          description: |-
            The index used for the maximum price calculation.

            Can have the following values:
            - construction_price_index
            - market_price_index
            - surface_area_price_ceiling
          type: string
          example: construction_price_index
          x-extensible-enum:
            - construction_price_index
            - market_price_index
            - surface_area_price_ceiling
        new_hitas:
          description: Was new Hitas ruleset used for the calculations
          type: boolean
          example: true
        calculations:
          description: Calculations for each index
          type: object
          required:
            - construction_price_index
            - market_price_index
            - surface_area_price_ceiling
          properties:
            construction_price_index:
              $ref: '#/components/schemas/ApartmentMaximumPriceCalculation'
            market_price_index:
              $ref: '#/components/schemas/ApartmentMaximumPriceCalculation'
            surface_area_price_ceiling:
              description: Calculations for particular index
              type: object
              additionalProperties: false
              required:
                - maximum_price
                - maximum
                - valid_until
              properties:
                calculation_variables:
                  description: Variables used for apartment's surface area price ceiling calculation
                  type: object
                  additionalProperties: false
                  required:
                    - calculation_date
                    - calculation_date_value
                    - surface_area
                    - apartment_share_of_housing_company_loans
                    - apartment_share_of_housing_company_loans_date
                  properties:
                    calculation_date:
                      description: Maximum price calculation date.
                      type: string
                      format: date
                      example: "2022-07-05"
                    calculation_date_value:
                      description: The value on the calculation date.
                      type: number
                      minimum: 0
                      example: 129.29
                    debt_free_price:
                      description: Value of the apartment without removing the housing company loans.
                      type: number
                      minimum: 0
                      example: 226058.97
                    surface_area:
                      description: Apartment's surface area
                      type: number
                      minimum: 0
                      example: 30.0
                    apartment_share_of_housing_company_loans:
                      description: |-
                        How much the apartment's share of the housing company loans.
                      type: integer
                      minimum: 0
                      example: 2500
                    apartment_share_of_housing_company_loans_date:
                      description: Date for the apartment share of housing company loan
                      type: string
                      format: date
                      example: "2022-07-28"
                maximum_price:
                  description: Maximum price for this index
                  type: number
                  minimum: 0
                  example: 223558.83
                valid_until:
                  description: The date until this maximum price calculation is valid.
                  type: string
                  format: date
                  example: 2022-10-05
                maximum:
                  description: Is this calculated maximum price the highest maximum price.
                  type: boolean
                  example: true
        apartment:
          description: Share information
          type: object
          additionalProperties: false
          required:
            - shares
            - rooms
            - type
            - surface_area
            - address
            - ownerships
          properties:
            shares:
              description: Share information
              type: object
              additionalProperties: false
              nullable: true
              required:
                - start
                - end
                - total
              properties:
                start:
                  description: First share number
                  type: integer
                  nullable: true
                  minimum: 0
                  example: 18402
                end:
                  description: Last share number
                  type: integer
                  nullable: true
                  minimum: 0
                  example: 20784
                total:
                  description: Total number of shares
                  type: integer
                  minimum: 0
                  readOnly: true
                  example: 2382
            rooms:
              description: Number of rooms for this apartment
              type: integer
              minimum: 0
              nullable: true
              example: 2
            type:
              description: Apartment type
              type: string
              example: "h+k"
            surface_area:
              description: Apartment's surface area
              type: number
              minimum: 0
              nullable: true
              example: 30.0
            address:
              description: Apartment's address
              type: object
              additionalProperties: false
              required:
                - street_address
                - floor
                - stair
                - apartment_number
                - postal_code
                - city
              properties:
                street_address:
                  description: Apartment's street address
                  type: string
                  example: Torikatu 18
                floor:
                  description: Apartment's floor
                  type: string
                  example: "1"
                stair:
                  description: Apartment's stair
                  type: string
                  example: B
                apartment_number:
                  description: Apartment number
                  type: integer
                  minimum: 0
                  example: 18
                postal_code:
                  description: Apartment's postal code
                  type: string
                  example: "00100"
                city:
                  description: Apartment's city
                  type: string
                  example: Helsinki
            ownerships:
              description: Ownership information
              type: array
              items:
                description: Single ownership
                type: object
                additionalProperties: false
                required:
                  - percentage
                  - name
                properties:
                  percentage:
                    description: Ownership percentage of this apartment
                    type: number
                    minimum: 0
                    maximum: 100
                    example: 100.0
                  name:
                    description: Owner name
                    type: string
                    example: Helsingin kaupunki
        housing_company:
          description: Housing company information for this apartment
          type: object
          additionalProperties: false
          required:
            - official_name
            - archive_id
            - property_manager
          properties:
            official_name:
              description: Official name
              type: string
              example: As Oy Helmi
            archive_id:
              description: Archive ID
              type: integer
              minimum: 0
              example: 792
            property_manager:
              description: Property manager information
              type: object
              additionalProperties: false
              required:
                - name
                - street_address
              properties:
                name:
                  description: Name of this property manager
                  type: string
                  example: Isännöinti Isät Oy
                street_address:
                  description: Property manager's street address
                  type: string
                  example: Isätie 42
        additional_info:
          description: Additional information to be displayed on the generated PDF
          type: string
          example: Example text

    ApartmentLinks:
      description: Links to apartment's related object
      type: object
      additionalProperties: false
      readOnly: true
      required:
        - housing_company
        - real_estate
        - building
        - apartment
      properties:
        housing_company:
          description: Links to apartment's housing company
          type: object
          additionalProperties: false
          required:
            - id
            - display_name
            - link
          properties:
            id:
              description: Housing company ID
              type: string
              example: a3181b8fa60b47df8ccba0d554a913bb
            display_name:
              description: Housing company's display name
              type: string
              example: Taloyhtiö Helmi
            link:
              description: API link to housing company
              type: string
              example: /api/v1/housing-companies/a3181b8fa60b47df8ccba0d554a913bb
        real_estate:
          description: Links to apartment's real estate
          type: object
          additionalProperties: false
          required:
            - id
            - link
          properties:
            id:
              description: Real estate ID
              type: string
              example: c86eaa399ce141d89d962d46bb81ab2b
            link:
              description: API link to real estate
              type: string
              example: /api/v1/housing-companies/a3181b8fa60b47df8ccba0d554a913bb/real-estates/c86eaa399ce141d89d962d46bb81ab2b
        building:
          description: Links to apartment's building
          type: object
          additionalProperties: false
          required:
            - id
            - link
          properties:
            id:
              description: Building ID
              type: string
              example: dc1072975bab4ba69f64814f021c6785
            street_address:
              description: Building's street address ID
              type: string
              example: Eerikinkatu 22
            link:
              description: API link to building
              type: string
              example: /api/v1/housing-companies/a3181b8fa60b47df8ccba0d554a913bb/real-estates/c86eaa399ce141d89d962d46bb81ab2b/buildings/dc1072975bab4ba69f64814f021c6785
        apartment:
          description: Links to apartment's details
          type: object
          additionalProperties: false
          required:
            - id
            - link
          properties:
            id:
              description: Apartment own ID
              type: string
              example: b477389cb3514fb1b444052a39bfb65d
            link:
              description: API link to read apartment's details
              type: string
              example: /api/v1/housing-companies/a3181b8fa60b47df8ccba0d554a913bb/apartments/b477389cb3514fb1b444052a39bfb65d

    ApartmentPrices:
      description: Single apartment price information
      type: object
      additionalProperties: false
      properties:
        first_sale_purchase_price:
          description: TBD
          type: number
          minimum: 0
          nullable: true
          example: 51222
        first_sale_share_of_housing_company_loans:
          description: The amount of loans this apartment had when it was sold for the first time.
          type: number
          minimum: 0
          nullable: true
          example: 4208
        first_sale_acquisition_price:
          description: TBD
          type: number
          minimum: 0
          nullable: true
          example: 55430
        catalog_purchase_price:
          description: Purchase price given in the sales catalog for this apartment
          type: number
          minimum: 0
          nullable: true
          example: 51222
        catalog_share_of_housing_company_loans:
          description: Share of housing company loans given in the sales catalog for this apartment
          type: number
          minimum: 0
          nullable: true
          example: 4208
        catalog_acquisition_price:
          description: Acquisition price based on sales catalog purchase price and share of housing company loans
          type: number
          minimum: 0
          nullable: true
          example: 55430
        latest_sale_purchase_price:
          description: TBD
          type: number
          minimum: 0
          nullable: true
          example: 51222
        first_purchase_date:
          description: TBD
          type: string
          format: date
          nullable: true
          example: 1985-12-10
        latest_purchase_date:
          description: TBD
          type: string
          format: date
          nullable: true
          example: 1989-11-17
        maximum_prices:
          description: Apartment's maximum Hitas prices
          type: object
          additionalProperties: false
          required:
            - confirmed
            - unconfirmed
          properties:
            confirmed:
              description: Apartment's confirmed maximum Hitas prices
              type: object
              additionalProperties: false
              nullable: true
              required:
                - id
                - created_at
                - confirmed_at
                - calculation_date
                - maximum_price
                - valid
              properties:
                id:
                  description: Maximum price calculation ID.
                  type: string
                  nullable: true
                  example: e65579e3ed0a4cc0b693d9910b41ab08
                calculation_date:
                  description: The timestamp when this maximum price calculation was done.
                  type: string
                  format: date
                  example: 2022-07-05
                created_at:
                  description: The timestamp when this maximum price calculation was done.
                  type: string
                  format: date-time
                  example: 2022-07-05T15:39:50.742380
                confirmed_at:
                  description: The timestamp when this maximum price calculation was confirmed.
                  type: string
                  format: date-time
                  nullable: true
                  example: 2022-07-05T15:42:39.64745
                maximum_price:
                  description: The maximum price for this apartment.
                  type: number
                  minimum: 0
                  example: 223558.24
                valid:
                  type: object
                  additionalProperties: false
                  required:
                    - is_valid
                    - valid_until
                  properties:
                    is_valid:
                      description: Is this confirmed maximum price still valid?
                      type: boolean
                      example: true
                    valid_until:
                      description: The date until this maximum price calculation is valid.
                      type: string
                      format: date
                      example: 2022-10-05
            unconfirmed:
              description: Apartment's unconfirmed maximum Hitas prices
              type: object
              additionalProperties: false
              required:
                - pre_2011
                - onwards_2011
              properties:
                pre_2011:
                  description: Apartment's maximum Hitas prices for apartments constructed before 2011
                  type: object
                  nullable: true
                  additionalProperties: false
                  required:
                    - construction_price_index
                    - market_price_index
                    - surface_area_price_ceiling
                  properties:
                    construction_price_index:
                      $ref: '#/components/schemas/MaximumValue'
                    market_price_index:
                      $ref: '#/components/schemas/MaximumValue'
                    surface_area_price_ceiling:
                      $ref: '#/components/schemas/MaximumValue'
                onwards_2011:
                  description: Apartment's maximum Hitas prices for apartments constructed 2011 onwards
                  type: object
                  nullable: true
                  additionalProperties: false
                  required:
                    - construction_price_index
                    - market_price_index
                    - surface_area_price_ceiling
                  properties:
                    construction_price_index:
                      $ref: '#/components/schemas/MaximumValue'
                    market_price_index:
                      $ref: '#/components/schemas/MaximumValue'
                    surface_area_price_ceiling:
                      $ref: '#/components/schemas/MaximumValue'
        construction:
          description: Single apartment construction price information
          type: object
          additionalProperties: false
          required:
            - loans
            - interest
            - debt_free_purchase_price
            - additional_work
          properties:
            loans:
              description: Loans during construction
              type: number
              minimum: 0
              nullable: true
              example: 9805
            interest:
              description: Interest during construction
              type: object
              additionalProperties: false
              nullable: true
              required:
                - rate_6
                - rate_14
              properties:
                rate_6:
                  type: number
                  minimum: 0
                  nullable: true
                  example: 3618
                rate_14:
                  type: number
                  minimum: 0
                  nullable: true
                  example: 4209
            debt_free_purchase_price:
              description: TBD
              type: number
              minimum: 0
              nullable: true
              example: 18281
            additional_work:
              description: TBD
              type: number
              minimum: 0
              nullable: true
              example: 8610

    MaximumValue:
      description: Maximum value
      type: object
      additionalProperties: false
      required:
        - value
        - maximum
      properties:
        value:
          description: Value
          type: number
          nullable: true
          minimum: 0
          example: 120456
        maximum:
          description: Is this value the maximum value for this apartment
          type: boolean

    Ownership:
      description: Ownership information
      type: object
      additionalProperties: false
      required:
        - owner
        - percentage
      properties:
        owner:
          $ref: '#/components/schemas/ReadOnlyOwner'
        percentage:
          description: Percentage that the owner owns of the apartment
          type: number
          minimum: 0
          maximum: 100
          example: 100

    Owner:
      description: Owner information
      type: object
      additionalProperties: false
      required:
        - id
        - name
        - identifier
        - email
      properties:
        id:
          description: ID of this owner
          type: string
          readOnly: true
          example: dc1072975bab4ba69f64814f021c6785
        name:
          description: Name of this owner
          type: string
          example: Martti Virtanen
        identifier:
          description: Identifier (social security number, business id, etc) of this owner
          type: string
          example: 260969-420B
          nullable: true
        email:
          description: Email for this owner
          type: string
          nullable: true
          example: martti.virtanen@example.com

    ReadOnlyOwner:
      description: Owner information
      type: object
      additionalProperties: false
      required:
        - id
        - name
        - identifier
        - email
      properties:
        id:
          description: ID of this owner
          type: string
          example: dc1072975bab4ba69f64814f021c6785
        name:
          description: Name of this owner
          type: string
          readOnly: true
          example: Martti Virtanen
        identifier:
          description: Identifier (social security number, business id, etc) of this owner
          type: string
          readOnly: true
          nullable: true
          example: 260969-420B
        email:
          description: Email for this owner
          type: string
          readOnly: true
          nullable: true
          example: martti.virtanen@example.com

    ReadOnlyAddress:
      description: Address information
      type: object
      additionalProperties: false
      readOnly: true
      required:
        - street_address
        - postal_code
        - city
      properties:
        street_address:
          description: Street address
          type: string
          readOnly: true
          example: Torikatu 16 B 4
        postal_code:
          description: Postal code
          type: string
          readOnly: true
          example: "90100"
        city:
          description: City
          type: string
          readOnly: true
          example: Oulu

    Address:
      description: Address information
      type: object
      additionalProperties: false
      required:
        - street_address
        - postal_code
        - city
      properties:
        street_address:
          description: Street address
          type: string
          example: Torikatu 16 B 4
        postal_code:
          description: Postal code
          type: string
          example: "90100"
        city:
          description: City
          type: string
          example: Oulu

    HitasPostalCode:
      description: Hitas postal code
      type: object
      additionalProperties: false
      required:
        - id
        - value
        - city
        - cost_area
      properties:
        id:
          description: ID of this code
          type: string
          readOnly: true
          example: 21d25cc973d8450f8f89937b9eba0a04
        value:
          description: Hitas postal code
          type: string
          example: "00100"
        city:
          description: City
          type: string
          example: Helsinki
        cost_area:
          description: Hitas cost area
          type: integer
          minimum: 1
          maximum: 4
          example: 2

    HitasHousingCompanyAddress:
      description: Hitas address information for a housing company (includes postal code)
      type: object
      additionalProperties: false
      required:
        - street_address
        - postal_code
        - city
      properties:
        street_address:
          description: Street address
          type: string
          example: Hannunkatu 24
        postal_code:
          description: Hitas postal code
          type: string
          example: "00100"
        city:
          description: City based on the postal code
          type: string
          readOnly: true
          example: Helsinki

    ApartmentAddress:
      description: Apartment address information
      type: object
      additionalProperties: false
      required:
        - street_address
        - postal_code
        - city
        - apartment_number
        - floor
        - stair
      properties:
        street_address:
          description: Street address
          type: string
          example: Hannunkatu 24
        postal_code:
          description: Hitas postal code
          type: string
          readOnly: true
          example: "00100"
        city:
          description: City based on the postal code
          type: string
          readOnly: true
          example: Helsinki
        apartment_number:
          description: Apartment number
          type: number
          minimum: 0
          example: 14
        floor:
          description: Apartment floor
          type: string
          maxLength: 50
          nullable: true
          example: "5"
        stair:
          description: Apartment stair
          type: string
          maxLength: 16
          example: A

    HitasAddress:
      description: Hitas address information
      type: object
      additionalProperties: false
      required:
        - street_address
        - postal_code
        - city
      properties:
        street_address:
          description: Street address
          type: string
          example: Hannunkatu 24
        postal_code:
          description: Hitas postal code
          type: string
          readOnly: true
          example: "00100"
        city:
          description: City based on the postal code
          type: string
          readOnly: true
          example: Helsinki

    ReadOnlyCode:
      description: Hitas codebook entry
      type: object
      additionalProperties: false
      required:
        - id
        - value
        - description
        - code
      properties:
        id:
          description: ID of this code
          type: string
          example: 21d25cc973d8450f8f89937b9eba0a04
        value:
          description: Value for this code
          type: string
          readOnly: true
          example: luhtitalo
        description:
          description: Description of this code
          type: string
          nullable: true
          readOnly: true
          example: This building type is for luhtitalo
        code:
          description: Code number
          type: string
          readOnly: true
          example: 001

    NullableReadOnlyCode:
      description: Hitas codebook entry
      type: object
      nullable: true
      additionalProperties: false
      required:
        - id
        - value
        - description
        - code
      properties:
        id:
          description: ID of this code
          type: string
          nullable: true
          example: 21d25cc973d8450f8f89937b9eba0a04
        value:
          description: Value for this code
          type: string
          readOnly: true
          example: luhtitalo
        description:
          description: Description of this code
          type: string
          nullable: true
          readOnly: true
          example: This building type is for luhtitalo
        code:
          description: Code number
          type: string
          readOnly: true
          example: 001

    Code:
      description: Hitas codebook entry
      type: object
      additionalProperties: false
      required:
        - id
        - value
        - description
        - code
      properties:
        id:
          description: ID of this code
          type: string
          readOnly: true
          example: 21d25cc973d8450f8f89937b9eba0a04
        value:
          description: Value for this code
          type: string
          example: luhtitalo
        description:
          description: Description of this code
          type: string
          nullable: true
          example: This building type is for luhtitalo
        code:
          description: Code number
          type: string
          example: 001

    HitasTypeItem:
      description: Hitas type
      type: object
      additionalProperties: false
      required:
        - value
        - label
        - old_ruleset
        - skip_from_statistics
        - no_interest
      properties:
        value:
          $ref: '#/components/schemas/HitasType'
        label:
          description: Readable name of the Hitas type
          type: string
          example: Hitas I
        old_ruleset:
          description: Hitas type follows old Hitas ruleset
          type: boolean
          example: false
        skip_from_statistics:
          description: Housing companies with this Hitas type should be excluded from statistics
          type: boolean
          example: false
        no_interest:
          description: Housing companies with this Hitas type should not include interest in max price calculation
          type: boolean
          example: false

    HitasType:
      description: |-
        Housing company hitas types

        Can have the following values:
        - non_hitas
        - hitas_1
        - hitas_2
        - hitas_1_no_interest
        - hitas_2_no_interest
        - new_hitas_1
        - new_hitas_2
        - half_hitas
        - rental_hitas_1
        - rental_hitas_2
      type: string
      example: hitas_1
      x-extensible-enum:
        - non_hitas
        - hitas_1
        - hitas_2
        - hitas_1_no_interest
        - hitas_2_no_interest
        - new_hitas_1
        - new_hitas_2
        - half_hitas
        - rental_hitas_1
        - rental_hitas_2

    ReadOnlyPropertyManager:
      description: Read-only Property manager information
      nullable: true
      type: object
      additionalProperties: false
      required:
        - id
        - name
        - email
        - address
      properties:
        id:
          description: ID of this property manager
          type: string
          example: dc1072975bab4ba69f64814f021c6785
        name:
          description: Name of this property manager
          type: string
          readOnly: true
          example: Ismo Isännöitsijät Oy
        email:
          description: Email for this property manager
          type: string
          readOnly: true
          example: ismo@example.com
        address:
          readOnly: true
          $ref: '#/components/schemas/ReadOnlyAddress'

    PropertyManager:
      description: Property manager information
      type: object
      additionalProperties: false
      required:
        - id
        - name
        - email
        - address
      properties:
        id:
          description: ID of this property manager
          type: string
          readOnly: true
          example: dc1072975bab4ba69f64814f021c6785
        name:
          description: Name of this property manager
          type: string
          example: Ismo Isännöitsijät Oy
        email:
          description: Email for this property manager
          type: string
          example: ismo@example.com
        address:
          $ref: '#/components/schemas/Address'

    YearMonth:
      description: Year and month
      type: string
      pattern: '^\d{4}-\d{2}$'
      example: 2022-01

    Index:
      description: Index contains month this index is active and a its value
      type: object
      additionalProperties: false
      required:
        - month
        - value
      properties:
        month:
          readOnly: true
          allOf:
            - $ref: '#/components/schemas/YearMonth'
        value:
          description: Value for this index
          type: number
          minimum: 0
          nullable: true
          example: 127.12
        valid_until:
          $ref: '#/components/schemas/YearMonth'

    RegulationStatusItem:
      description: Regulation status
      type: object
      additionalProperties: false
      required:
        - value
        - label
      properties:
        value:
          $ref: '#/components/schemas/RegulationStatus'
        label:
          description: Readable name of the Regulation status
          type: string
          example: Released by Hitas

    RegulationStatus:
      description: |-
        Housing company regulation state

        Can have the following values:
        - regulated
        - released_by_hitas
        - released_by_plot_department
      type: string
      example: released_by_hitas
      x-extensible-enum:
        - regulated
        - released_by_hitas
        - released_by_plot_department

    HousingCompanyState:
      description: |-
        Housing company state

        Can have the following values:
        - not_ready
        - lt_30_years
        - gt_30_years_not_free
        - gt_30_years_free
        - gt_30_years_plot_department_notification
        - half_hitas
        - ready_no_statistics
      type: string
      example: gt_30_years_not_free
      x-extensible-enum:
        - not_ready
        - lt_30_years
        - gt_30_years_not_free
        - gt_30_years_free
        - gt_30_years_plot_department_notification
        - half_hitas
        - ready_no_statistics

    ApartmentState:
      description: |-
        Apartment state

        Can have the following values:
        - free
        - reserved
        - sold
      type: string
      nullable: true
      example: sold
      x-extensible-enum:
        - free
        - reserved
        - sold

    ApartmentSale:
      description: Apartment sale
      type: object
      additionalProperties: false
      required:
        - id
        - ownerships
        - notification_date
        - purchase_date
        - purchase_price
        - apartment_share_of_housing_company_loans
        - exclude_from_statistics
      properties:
        id:
          description: Apartment sale ID
          type: string
          example: b477389cb3514fb1b444052a39bfb65d
        ownerships:
          description: List of ownerships resulting from this sale
          type: array
          items:
            $ref: '#/components/schemas/Ownership'
        notification_date:
          description: Sale notification date
          type: string
          format: date
          example: 1985-12-10
        purchase_date:
          description: Sale purchase date
          type: string
          format: date
          example: 1985-12-10
        purchase_price:
          description: Sale purchase price
          type: number
          minimum: 0
          example: 51222
        apartment_share_of_housing_company_loans:
          description: Apartment share of housing company loans
          type: number
          minimum: 0
          example: 51222
        exclude_from_statistics:
          description: Should sale be excluded from statistics?
          type: boolean
          example: false

    ApartmentSaleCreate:
      description: Apartment sale create data
      type: object
      additionalProperties: false
      required:
        - ownerships
        - notification_date
        - purchase_date
        - purchase_price
        - apartment_share_of_housing_company_loans
        - exclude_from_statistics
      properties:
        ownerships:
          description: List of ownerships resulting from this sale
          type: array
          items:
            $ref: '#/components/schemas/Ownership'
        notification_date:
          description: Sale notification date
          type: string
          format: date
          example: 1985-12-10
        purchase_date:
          description: Sale purchase date
          type: string
          format: date
          example: 1985-12-10
        purchase_price:
          description: Sale purchase price
          type: number
          minimum: 0
          example: 51222
        apartment_share_of_housing_company_loans:
          description: Apartment share of housing company loans
          type: number
          minimum: 0
          example: 51222
        exclude_from_statistics:
          description: Should sale be excluded from statistics?
          type: boolean
          example: false

    ApartmentSaleCreated:
      description: Apartment sale created
      type: object
      additionalProperties: false
      required:
        - id
        - ownerships
        - notification_date
        - purchase_date
        - purchase_price
        - apartment_share_of_housing_company_loans
        - exclude_from_statistics
        - conditions_of_sale_created
      properties:
        id:
          description: Apartment sale ID
          type: string
          example: b477389cb3514fb1b444052a39bfb65d
        ownerships:
          description: List of ownerships resulting from this sale
          type: array
          items:
            $ref: '#/components/schemas/Ownership'
        notification_date:
          description: Sale notification date
          type: string
          format: date
          example: 1985-12-10
        purchase_date:
          description: Sale purchase date
          type: string
          format: date
          example: 1985-12-10
        purchase_price:
          description: Sale purchase price
          type: number
          minimum: 0
          example: 51222
        apartment_share_of_housing_company_loans:
          description: Apartment share of housing company loans
          type: number
          minimum: 0
          example: 51222
        exclude_from_statistics:
          description: Should sale be excluded from statistics?
          type: boolean
          example: false
        conditions_of_sale_created:
          description: Were any conditions of sale created with this sale?
          type: boolean
          example: false

    ApartmentSaleUpdate:
      description: Apartment sale update data
      type: object
      additionalProperties: false
      required:
        - notification_date
        - purchase_date
        - purchase_price
        - apartment_share_of_housing_company_loans
        - exclude_from_statistics
      properties:
        notification_date:
          description: Sale notification date
          type: string
          format: date
          example: 1985-12-10
        purchase_date:
          description: Sale purchase date
          type: string
          format: date
          example: 1985-12-10
        purchase_price:
          description: Sale purchase price
          type: number
          minimum: 0
          example: 51222
        apartment_share_of_housing_company_loans:
          description: Apartment share of housing company loans
          type: number
          minimum: 0
          example: 51222
        exclude_from_statistics:
          description: Should sale be excluded from statistics?
          type: boolean
          example: false

    ApartmentConditionOfSale:
      description: Condition of Sale under an apartment
      type: object
      additionalProperties: false
      required:
        - id
        - owner
        - apartment
        - grace_period
        - fulfilled
        - sell_by_date
      properties:
        id:
          description: ID of this condition of sale
          type: string
          readOnly: true
          example: dc1072975bab4ba69f64814f021c6785
        owner:
          readOnly: true
          $ref: '#/components/schemas/ReadOnlyOwner'
        apartment:
          readOnly: true
          $ref: '#/components/schemas/ConditionOfSaleApartment'
        grace_period:
          $ref: '#/components/schemas/GracePeriod'
        fulfilled:
          description: When this condition of sale was fulfilled, null if not fulfilled yet
          type: string
          nullable: true
          readOnly: true
          format: date-time
          example: 1985-12-10T00:00:00+00:00
        sell_by_date:
          description: |-
            The date when this apartment needs to be sold to fulfill a condition of sale linked to this apartment's
            ownership(s). In case of multiple conditions of sale, use the first one in chronological order.
            The value will be null if there are no current conditions of sale for this apartment's ownerships.
          type: string
          format: date
          nullable: true
          readOnly: true

    ConditionOfSale:
      description: Condition of sale between two ownerships
      type: object
      additionalProperties: false
      required:
        - id
        - new_ownership
        - old_ownership
        - grace_period
        - fulfilled
      properties:
        id:
          description: ID of this condition of sale
          type: string
          readOnly: true
          example: dc1072975bab4ba69f64814f021c6785
        new_ownership:
          readOnly: true
          $ref: '#/components/schemas/ConditionOfSaleOwnership'
        old_ownership:
          readOnly: true
          $ref: '#/components/schemas/ConditionOfSaleOwnership'
        grace_period:
          $ref: '#/components/schemas/GracePeriod'
        fulfilled:
          description: When this condition of sale was fulfilled, null if not fulfilled yet
          type: string
          nullable: true
          readOnly: true
          format: date-time
          example: 1985-12-10T00:00:00+00:00

    ConditionOfSaleCreate:
      description: Create conditions of sale for a household
      type: object
      additionalProperties: false
      properties:
        household:
          description: |-
            List of owners belonging to the same household.
            Conditions of sale will be created for each ownership
            to a new apartment in this household.
          type: array
          minItems: 1
          uniqueItems: true
          items:
            description: ID of an owner
            type: string
            example: dc1072975bab4ba69f64814f021c6785

    ConditionOfSaleOwnership:
      description: Ownership relating to a condition of sale
      type: object
      additionalProperties: false
      required:
        - percentage
        - apartment
        - owner
      properties:
        percentage:
          description: Percentage that the owner owns of the apartment
          type: number
          minimum: 0
          maximum: 100
          example: 100
        apartment:
          $ref: '#/components/schemas/ConditionOfSaleApartment'
        owner:
          $ref: '#/components/schemas/ReadOnlyOwner'

    ConditionOfSaleApartment:
      description: Minimal apartment address information
      type: object
      additionalProperties: false
      required:
        - id
        - address
        - housing_company
      properties:
        id:
          description: ID of this apartment
          type: string
          readOnly: true
          example: dc1072975bab4ba69f64814f021c6785
        address:
          $ref: '#/components/schemas/ApartmentAddress'
        housing_company:
          description: Links to apartment's housing company
          type: object
          additionalProperties: false
          required:
            - id
            - display_name
          properties:
            id:
              description: Housing company ID
              type: string
              example: a3181b8fa60b47df8ccba0d554a913bb
            display_name:
              description: Housing company's display name
              type: string
              example: Taloyhtiö Helmi

    GracePeriod:
      description: |-
        Condition of Sale grace period.

        Can have the following values:
        - not_given
        - three_months
        - six_months
      type: string
      nullable: false
      example: not_given
      x-extensible-enum:
        - not_given
        - three_months
        - six_months

    SalesCatalog:
      description: Apartment sales catalog
      type: object
      additionalProperties: false
      required:
        - apartments
        - confirmation_date
        - total_surface_area
        - total_acquisition_price
        - acquisition_price_limit
      properties:
        apartments:
          description: Apartments read from the sheet
          type: array
          items:
            $ref: '#/components/schemas/SalesCatalogApartment'
        confirmation_date:
          description: Sales catalog confirmation date
          type: string
          format: date
          example: 2022-07-05
        total_surface_area:
          description: Total surface area of all apartments
          type: number
          example: 2234.0
        total_acquisition_price:
          description: Total acquisition price of all apartments
          type: number
          example: 23456.64
        acquisition_price_limit:
          description: Decided limit on the total acquisition price
          type: number
          example: 23500.00

    SalesCatalogApartment:
      description: Apartment sale catalog apartment
      type: object
      additionalProperties: false
      required:
        - row
        - stair
        - floor
        - apartment_number
        - rooms
        - apartment_type
        - surface_area
        - share_number_start
        - share_number_end
        - catalog_purchase_price
        - catalog_primary_loan_amount
        - acquisition_price
      properties:
        row:
          description: Excel row where the Apartment was parsed from, 1-indexed
          type: integer
          minimum: 1
          example: 1
        stair:
          description: Apartment stair
          type: string
          maxLength: 16
          example: A
        floor:
          description: Apartment floor
          type: string
          maxLength: 50
          example: "5"
        apartment_number:
          description: Apartment number
          type: number
          minimum: 0
          example: 14
        rooms:
          description: Number of rooms for this apartment
          type: integer
          minimum: 0
          example: 2
        apartment_type:
          type: object
          description: Apartment type
          properties:
            id:
              description: Apartment type ID
              type: string
              example: dc1072975bab4ba69f64814f021c6785
            value:
              description: Apartment type code
              type: string
              example: h+k+s
        surface_area:
          description: Apartment's surface area
          type: number
          minimum: 0
          example: 30.0
        share_number_start:
          description: First share number
          type: integer
          nullable: true
          minimum: 0
          example: 100
        share_number_end:
          description: Last share number
          type: integer
          nullable: true
          minimum: 0
          example: 150
        catalog_purchase_price:
          description: The price paid to the seller when the house is bought
          type: number
          minimum: 0
          example: 18281
        catalog_primary_loan_amount:
          description: Buyer's loan amount to the housing company
          type: number
          minimum: 0
          nullable: true
          example: 4208
        acquisition_price:
          description: Actual price paid by the buyer for the house
          type: number
          minimum: 0
          nullable: true
          example: 55430

    SalesCatalogApartmentCreate:
      description: Input for creating an apartment from sales catalog
      type: object
      additionalProperties: false
      required:
        - stair
        - floor
        - apartment_number
        - rooms
        - apartment_type
        - surface_area
        - share_number_start
        - share_number_end
        - catalog_purchase_price
        - catalog_primary_loan_amount
      properties:
        stair:
          description: Apartment stair
          type: string
          maxLength: 16
          example: A
        floor:
          description: Apartment floor
          type: string
          maxLength: 50
          example: "5"
        apartment_number:
          description: Apartment number
          type: number
          minimum: 0
          example: 14
        rooms:
          description: Number of rooms for this apartment
          type: integer
          minimum: 0
          example: 2
        apartment_type:
          description: Apartment type ID
          type: string
          example: dc1072975bab4ba69f64814f021c6785
        surface_area:
          description: Apartment's surface area
          type: number
          minimum: 0
          example: 30.0
        share_number_start:
          description: First share number
          type: integer
          nullable: true
          minimum: 0
          example: 100
        share_number_end:
          description: Last share number
          type: integer
          nullable: true
          minimum: 0
          example: 150
        catalog_purchase_price:
          description: The price paid to the seller when the house is bought
          type: number
          minimum: 0
          example: 18281
        catalog_primary_loan_amount:
          description: Buyer's loan amount to the housing company
          type: number
          minimum: 0
          nullable: true
          example: 4208

    ExternalSalesData:
      description: External sales data from cost area sales catalog
      type: object
      additionalProperties: false
      required:
        - calculation_quarter
        - quarter_1
        - quarter_2
        - quarter_3
        - quarter_4
      properties:
        calculation_quarter:
          description: Quarter this calculation is for.
          type: string
          example: 2022Q1
        quarter_1:
          $ref: '#/components/schemas/ExternalSalesDataQuarter'
        quarter_2:
          $ref: '#/components/schemas/ExternalSalesDataQuarter'
        quarter_3:
          $ref: '#/components/schemas/ExternalSalesDataQuarter'
        quarter_4:
          $ref: '#/components/schemas/ExternalSalesDataQuarter'

    ExternalSalesDataQuarter:
      description: External sales data quarter
      type: object
      additionalProperties: false
      required:
        - quarter
        - areas
      properties:
        quarter:
          description: Quarter this calculation is for.
          type: string
          example: 2022Q1
        areas:
          description: Cost areas for this quarter.
          type: array
          items:
            $ref: '#/components/schemas/ExternalSalesDataCostAreaData'

    ExternalSalesDataCostAreaData:
      description: External sales data quarter cost areas
      type: object
      additionalProperties: false
      required:
        - postal_code
        - sale_count
        - price
      properties:
        postal_code:
          description: Cost area postal code.
          type: string
          example: 00120
        sale_count:
          description: Sale count.
          type: integer
          minimum: 0
          nullable: true
          example: 150
        price:
          description: Square area price, arithmetic.
          type: integer
          minimum: 0
          nullable: true
          example: 28490

    ThirtyYearRegulationResults:
      description: Thirty year regulation results
      type: object
      additionalProperties: false
      required:
        - automatically_released
        - released_from_regulation
        - stays_regulated
        - skipped
        - obfuscated_owners
      properties:
        automatically_released:
          description: Housing Companies that are release from regulation automatically.
          type: array
          items:
            $ref: '#/components/schemas/ThirtyYearRegulationData'
        released_from_regulation:
          description: Housing Companies that are released from regulation based on 30 year comparison.
          type: array
          items:
            $ref: '#/components/schemas/ThirtyYearRegulationData'
        stays_regulated:
          description: Housing Companies that stay regulated.
          type: array
          items:
            $ref: '#/components/schemas/ThirtyYearRegulationData'
        skipped:
          description: Housing Companies that could not be checked for regulation.
          type: array
          items:
            $ref: '#/components/schemas/ThirtyYearRegulationData'
        obfuscated_owners:
          description: Owners that have been obfuscated due to no longer owning any regulated apartments
          type: array
          items:
            $ref: '#/components/schemas/ObfuscatedOwner'

    ThirtyYearRegulationData:
      description: Thirty year regulation data for a checked housing company
      type: object
      additionalProperties: false
      required:
        - id
        - display_name
        - price
        - old_ruleset
      properties:
        id:
          description: ID of a housing company
          type: string
          example: dc1072975bab4ba69f64814f021c6785
        display_name:
          description: Housing company's display name
          type: string
          example: Taloyhtiö Helmi
        address:
          $ref: '#/components/schemas/HitasHousingCompanyAddress'
        price:
          description: |-
            Average price per square meter for all apartments in the housing company,
            or current surface area price ceiling, which ever is the highest. This value
            was compared to the housing company's postal code's average price per square meter.

            In case the housing company was released automatically, this value will be zero.
          type: number
          minimum: 0
          example: 23456.64
        old_ruleset:
          description: Does this housing company use the old or the new hitas ruleset?
          type: boolean
          example: false
        completion_date:
          description: Housing company completion date
          type: string
          format: date
          example: 2023-02-01
        property_manager:
          $ref: '#/components/schemas/ReadOnlyPropertyManager'

    ObfuscatedOwner:
      description: Owner that has been obfuscated due to no longer owning any regulated apartments
      type: object
      additionalProperties: false
      required:
        - name
        - identifier
        - email
      properties:
        name:
          description: Name of this owner
          type: string
          nullable: true
          example: Martti Virtanen
        identifier:
          description: Identifier (social security number, business id, etc) of this owner
          type: string
          nullable: true
          example: 260969-420B
        email:
          description: Email for this owner
          type: string
          nullable: true
          example: martti.virtanen@example.com

    SurfaceAreaPriceCeilingCalculationResult:
      description: Surface area price ceiling calculation
      type: object
      additionalProperties: false
      required:
        - calculation_month
        - data
      properties:
        calculation_month:
          description: Surface area price ceiling calculation month
          type: string
          format: date
          example: 2023-02-01
        data:
          $ref: '#/components/schemas/SurfaceAreaPriceCeilingCalculationData'

    SurfaceAreaPriceCeilingCalculationData:
      description: Surface area price ceiling calculation data
      type: object
      additionalProperties: false
      required:
        - housing_company_data
        - created_surface_area_price_ceilings
      properties:
        housing_company_data:
          type: array
          items:
            $ref: '#/components/schemas/SurfaceAreaPriceCeilingCalculationHousingCompanyData'
        created_surface_area_price_ceilings:
          type: array
          minItems: 3
          maxItems: 3
          items:
            $ref: '#/components/schemas/Index'

    SurfaceAreaPriceCeilingCalculationHousingCompanyData:
      description: Surface area price ceiling calculation data
      type: object
      additionalProperties: false
      required:
        - name
        - completion_date
        - surface_area
        - realized_acquisition_price
        - unadjusted_average_price_per_square_meter
        - adjusted_average_price_per_square_meter
        - completion_month_index
        - calculation_month_index
      properties:
        name:
          description: Housing company's display name
          type: string
          example: Taloyhtiö Helmi
        completion_date:
          description: Housing company completion date
          type: string
          format: date
          example: 1999-12-31
        surface_area:
          description: Housing company surface area
          type: number
          example: 59.6
        realized_acquisition_price:
          description: Housing company realized acquisition price
          type: number
          example: 60000.0
        unadjusted_average_price_per_square_meter:
          description: Average price per square meter before index adjustment
          type: number
          example: 6000.0
        adjusted_average_price_per_square_meter:
          description: Average price per square meter after index adjustment
          type: number
          example: 12000.0
        completion_month_index:
          description: Market price index for the month the housing company was completed
          type: number
          example: 100.0
        calculation_month_index:
          description: Market price index for the month the calculation was made
          type: number
          example: 200.0

    # Errors

    BadRequestError:
      description: Bad request error
      type: object
      additionalProperties: false
      required:
        - status
        - reason
        - message
        - error
      properties:
        status:
          description: Error code
          type: integer
          example: 400
          enum: [400]
        reason:
          description: Error phrase
          type: string
          example: "Bad Request"
          enum: ["Bad Request"]
        message:
          description: Human-readable details about the error
          type: string
          example: Request could not be processed due to malformed request
        error:
          description: |-
            Error reason

            Can have the following values:
            - bad_request
          type: string
          example: bad_request
          x-extensible-enum:
            - bad_request
        fields:
          description: Details about specific validation failures on specific fields
          type: array
          items:
            description: Single field validation details
            type: object
            additionalProperties: false
            required:
              - field
              - message
            properties:
              field:
                description: Name of the field
                type: string
                example: name
              message:
                description: Error message with details about the failure
                type: string
                example: Length exceeds maximum length of 50

    UnauthorizedError:
      description: Unauthorized error
      type: object
      additionalProperties: false
      required:
        - status
        - reason
        - message
        - error
      properties:
        status:
          description: Error code
          type: integer
          enum: [401]
        reason:
          description: Error phrase
          type: string
          enum: ["Unauthorized"]
        message:
          description: Human-readable details about the error
          type: string
          example: The request requires authentication
        error:
          description: Error reason
          type: string
          enum: [unauthorized]

    NotFoundError:
      description: Not found error
      type: object
      additionalProperties: false
      required:
        - status
        - reason
        - message
        - error
      properties:
        status:
          description: Error code
          type: integer
          enum: [404]
          example: 404
        reason:
          description: Error phrase
          type: string
          enum: ["Not Found"]
          example: Not Found
        message:
          description: Human-readable details about the error
          type: string
          example: Housing company not found
        error:
          description: |-
            Error reason

            Can have the following values:
            - housing_company_not_found
            - housing_company_property_not_found
            - housing_company_building_not_found
            - apartment_not_found
            - postal_code_not_found
            - property_manager_not_found
            - financing_method_not_found
            - building_type_not_found
            - developer_not_found
            - apartment_type_not_found
          type: string
          example: housing_company_not_found
          x-extensible-enum:
            - housing_company_not_found
            - housing_company_property_not_found
            - housing_company_building_not_found
            - apartment_not_found
            - postal_code_not_found
            - property_manager_not_found
            - financing_method_not_found
            - building_type_not_found
            - developer_not_found
            - apartment_type_not_found

    NotAcceptableError:
      description: Not acceptable error
      type: object
      additionalProperties: false
      required:
        - status
        - reason
        - message
        - error
      properties:
        status:
          description: Error code
          type: integer
          enum: [406]
          example: 406
        reason:
          description: Error phrase
          type: string
          enum: ["Not Acceptable"]
          example: Not Acceptable
        message:
          description: Human-readable details about the error
          type: string
          example: Only 'application/json' Content-Type is supported.
        error:
          description: Error reason
          type: string
          enum: [not_acceptable]
          example: not_acceptable

    ConflictError:
      description: Conflict error
      type: object
      additionalProperties: false
      required:
        - status
        - reason
        - message
        - error
      properties:
        status:
          description: Error code
          type: integer
          enum: [409]
          example: 409
        reason:
          description: Error phrase
          type: string
          enum: ["Conflict"]
          example: Conflict
        message:
          description: Human-readable details about the error
          type: string
          example: Owner has active ownerships and cannot be removed.
        error:
          description: |-
            Error reason

            Can have the following values:
            - owner_in_use
            - index_missing
            - invalid_calculation_result
          type: string
          example: owner_in_use
          x-extensible-enum:
            - owner_in_use
            - index_missing
            - invalid_calculation_result
        fields:
          description: Details about specific validation failures
          type: array
          items:
            description: Single validation detail
            type: object
            additionalProperties: false
            required:
              - field
              - message
            properties:
              field:
                description: |-
                  Always "non_field_errors" if given. Indicates that the error was not caused by a serializer field.
                type: string
                example: non_field_errors
              message:
                description: Error message with details about the failure
                type: string
                example: Values needed for the endpoint are missing

    UnsupportedMediaTypeError:
      description: Unsupported media type error
      type: object
      additionalProperties: false
      required:
        - status
        - reason
        - message
        - error
      properties:
        status:
          description: Error code
          type: integer
          enum: [415]
          example: 415
        reason:
          description: Error phrase
          type: string
          enum: ["Unsupported Media Type"]
          example: Unsupported Media Type
        message:
          description: Human-readable details about the error
          type: string
          example: Only 'application/json' Content-Type is supported.
        error:
          description: Error reason
          type: string
          enum: [unsupported_media_type]
          example: unsupported_media_type

    InternalServerError:
      type: object
      additionalProperties: false
      description: Internal server error
      required:
        - status
        - reason
        - message
        - error
      properties:
        status:
          description: Error code
          type: integer
          enum: [500]
          example: 500
        reason:
          description: Error phrase
          type: string
          example: Internal Server Error
        message:
          description: Human-readable details about the error
          type: string
          example: Unexpected internal server error occurred
        error:
          description: Error reason
          type: string
          enum: [internal_server_error]
          example: internal_server_error

  responses:

    BadRequest:
      description: The request was malformed
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/BadRequestError'
          example:
            status: 400
            reason: Bad Request
            error: bad_request
            message: Some fields failed validation
            fields:
              - field: name
                message: Length exceeds maximum length of 50
              - field: age
                message: Age must be within range [0, 200]
              - field: email
                message: Email is required

    Unauthorized:
      description: The request was not authenticated
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/UnauthorizedError'
          example:
            status: 401
            reason: Unauthorized
            error: unauthorized
            message: The request requires an authentication

    NotFound:
      description: The specified resource was not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/NotFoundError'
          example:
            status: 404
            reason: Not Found
            error: housing_company_not_found
            message: Housing company not found

    NotAcceptable:
      description: Only 'application/json' content-type is supported.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/NotAcceptableError'
          example:
            status: 406
            reason: Not Acceptable
            error: not_acceptable
            message: Only 'application/json' Content-Type is supported.

    NotAcceptableExcel:
      description: |-
        Only 'application/vnd.ms-excel' or
        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'
        content-types are supported.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/NotAcceptableError'
          example:
            status: 406
            reason: Not Acceptable
            error: not_acceptable
            message: |-
              Only 'application/vnd.ms-excel' or
              'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'
              content-types are supported.

    Conflict:
      description: The request could not be completed due to a conflict with the current state of the resource.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ConflictError'
          example:
            status: 409
            reason: Conflict
            error: owner_in_use
            message: Owner has active ownerships and cannot be removed.

    UnsupportedMediaType:
      description: Only 'application/json' content-type is supported.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/UnsupportedMediaTypeError'
          example:
            status: 415
            reason: Unsupported Media Type
            error: unsupported_media_type
            message: Only 'application/json' Content-Type is supported.

    UnsupportedMediaTypeExcel:
      description: |-
        Only 'application/vnd.ms-excel' or
        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'
        content-types are supported.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/UnsupportedMediaTypeError'
          example:
            status: 415
            reason: Unsupported Media Type
            error: unsupported_media_type
            message: |-
              Only 'application/vnd.ms-excel' or
              'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'
              content-types are supported.

    InternalServerError:
      description: Unexpected internal server error occurred
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/InternalServerError'
          example:
            status: 500
            reason: Internal Server Error
            error: internal_server_error
            message: Unexpected internal server error occurred
